{"version":3,"sources":["config.js","auth/index.js","core/Menu.js","core/cartHelpers.js","core/Layout.js","user/Signup.js","user/Signin.js","core/apiCore.js","core/showImage.js","core/Card.js","core/Search.js","core/home.js","auth/PrivateRoute.js","user/userDashboard.js","user/apiUser.js","auth/AdminRoute.js","user/AdminDashboard.js","admin/ApiAdmin.js","admin/AddCategory.js","admin/AddProduct.js","core/checkbox.js","core/RadioBox.js","core/fixedPrices.js","core/Shop.js","core/Product.js","core/Checkout.js","core/Cart.js","admin/Orders.js","user/Profile.js","admin/ManageProducts.js","admin/UpdateProduct.js","Routes.js","index.js"],"names":["API","isAuthenticated","window","localStorage","getItem","JSON","parse","isActive","history","path","location","pathname","backgroundColor","color","borderRadius","withRouter","className","style","flexDirection","href","fontFamily","fontWeight","fontSize","src","alt","width","borderBottom","marginLeft","to","length","user","role","cursor","onClick","next","removeItem","fetch","method","then","response","console","log","catch","err","signout","push","Layout","title","description","children","Signup","useState","name","email","password","error","success","values","setValues","handleChange","event","target","value","clickSubmit","preventDefault","headers","Accept","body","stringify","json","data","display","onChange","type","Signin","loading","redirectToReferrer","signin","setItem","authenticate","getProducts","sortBy","getCategories","getFilteredProducts","skip","limit","filters","ShowImage","item","url","_id","height","Card","product","showViewProductButton","showAddToCartButton","cartUpdate","showRemoveProductButton","setRun","f","run","undefined","redirect","setRedirect","count","setCount","addToCart","cart","Array","from","Set","map","p","id","find","addItem","productId","i","updateItem","shouldRedirect","substring","price","category","moment","createdAt","fromNow","quantity","showViewButton","showAddToCartBtn","splice","showRemoveButton","showCartUpdateOptions","Search","categories","search","results","searched","setData","useEffect","searchData","params","query","queryString","list","searchSubmit","e","searchMessage","onSubmit","c","key","placeholder","border","searchedProducts","Home","productsBySell","setProductsBySell","productsByArrival","setProductsByArrival","setError","PrivateRoute","Component","component","rest","render","props","state","Dashboard","setHistory","token","init","userId","Authorization","getPurchaseHistory","h","products","purchaseHistory","AdminRoute","AdminDashboard","AddCategory","setName","setSuccess","createCategory","showError","showSuccess","autoFocus","required","AddProduct","shipping","photo","createdProduct","redirectToProfile","formData","FormData","files","set","createProduct","accept","Checkbox","handleFilters","checked","setChecked","handleToggle","currentCategoryId","indexOf","newCheckedCategoryId","RadioBox","prices","setValue","array","Shop","myFilters","setMyFilters","setCategories","setSkip","size","setSize","filteredResults","setFilteredResults","loadMore","toSkip","loadFilteredResults","filterBy","newFilters","priceValues","handlePrice","parseInt","classname","Product","setProduct","relatedProduct","setRelatedProduct","loadSingleProduct","read","listRelated","match","Checkout","clientToken","instance","address","getToken","getBraintreeClientToken","getTotal","reduce","currentValue","nextValue","handleAddress","deliveryAddress","buy","requestPaymentMethod","paymentData","paymentMethodNonce","nonce","amount","processPayment","createOrderData","transaction_id","transaction","order","createOrder","message","showDropIn","onBlur","options","authorization","paypal","flow","onInstance","Cart","items","setItems","showItems","Orders","orders","setOrders","statusValues","setStatusValues","loadOrders","listOrders","loadStatusValues","getStatusValues","showInput","readOnly","handleStatusChange","orderId","status","updateOrderStatus","o","oIndex","index","showStatus","pIndex","padding","Profile","update","alert","auth","updateUser","profileUpdate","redirectUser","ManageProducts","setProducts","loadProducts","destroy","deleteProduct","UpdateProduct","getProduct","initCategories","updateProduct","Routes","exact","ReactDOM","document","getElementById"],"mappings":"6OAAaA,EAAM,OCyDNC,EAAkB,WAC3B,MAAoB,oBAAVC,WAGPC,aAAaC,QAAQ,QACbC,KAAKC,MAAMH,aAAaC,QAAQ,UCzDzCG,EAAW,SAACC,EAASC,GACvB,OAAID,EAAQE,SAASC,WAAaF,EACvB,CAAEG,gBAAiB,UAAWC,MAAO,UAAWC,aAAc,QAG9D,CAAED,MAAO,UAAWC,aAAc,SAkElCC,eA9DF,SAAC,GAAD,IAAGP,EAAH,EAAGA,QAAH,OACT,6BACI,yBAAKQ,UAAU,4EAA4EC,MAAO,CAACC,cAAe,QAC9G,uBAAGF,UAAU,eAAeG,KAAK,IAAIF,MAAO,CAACG,WAAY,YAAaC,WAAY,OAAQC,SAAU,KAChG,yBAAKC,IAAI,kCAAkCC,IAAI,aAAaC,MAAM,SAEtE,wBAAIT,UAAU,6CAA6CC,MAAO,CAACS,aAAc,EAAGC,WAAY,OAAQL,SAAU,KAC9G,wBAAIN,UAAU,YACV,kBAAC,IAAD,CAAMA,UAAU,WAAWC,MAAOV,EAASC,EAAS,KAAMoB,GAAG,KAA7D,SAGJ,wBAAIZ,UAAU,YACV,kBAAC,IAAD,CAAMA,UAAU,WAAWC,MAAOV,EAASC,EAAS,SAAUoB,GAAG,SAAjE,SAGJ,wBAAIZ,UAAU,YACd,kBAAC,IAAD,CACIA,UAAU,WACVC,MAAOV,EAASC,EAAS,SACzBoB,GAAG,SAHP,OAKS,IACL,6BACI,2BAAOZ,UAAU,cCPf,qBAAXd,QACHC,aAAaC,QAAQ,QACdC,KAAKC,MAAMH,aAAaC,QAAQ,SAASyB,OAGjD,MDOM5B,KAAqD,IAAhCA,IAAkB6B,KAAKC,MACzC,wBAAIf,UAAU,YACV,kBAAC,IAAD,CAAMA,UAAU,WAAWC,MAAOV,EAASC,EAAS,mBAAoBoB,GAAG,mBAA3E,cAIP3B,KAAqD,IAAhCA,IAAkB6B,KAAKC,MACzC,wBAAIf,UAAU,YACV,kBAAC,IAAD,CAAMA,UAAU,WAAWC,MAAOV,EAASC,EAAS,oBAAqBoB,GAAG,oBAA5E,qBAIN3B,KACE,kBAAC,WAAD,KACI,wBAAIe,UAAU,YACV,kBAAC,IAAD,CAAMA,UAAU,WAAWC,MAAOV,EAASC,EAAS,WAAYoB,GAAG,WAAnE,WAEJ,wBAAIZ,UAAU,YACV,kBAAC,IAAD,CAAMA,UAAU,WAAWC,MAAOV,EAASC,EAAS,WAAYoB,GAAG,WAAnE,YAIX3B,KACG,wBAAIe,UAAU,YACV,0BAAMA,UAAU,WAAWC,MAAO,CAAEe,OAAQ,UAAWnB,MAAO,UAAWC,aAAc,QAAUmB,QAAS,kBDvB3G,SAACC,GACpB,GAAqB,qBAAXhC,OAGN,OAFAC,aAAagC,WAAW,OACxBD,IACOE,MAAM,GAAD,OAAIpC,EAAJ,YAAmB,CAC3BqC,OAAQ,QAEXC,MAAK,SAAAC,GACFC,QAAQC,IAAI,UAAWF,MAE1BG,OAAM,SAAAC,GAAG,OAAGH,QAAQC,IAAIE,MCauGC,EAAQ,WACpHpC,EAAQqC,KAAK,UADjB,mBEpDTC,EAXA,SAAC,GAAD,QAAGC,aAAH,MAAW,QAAX,MAAoBC,mBAApB,MAAkC,cAAlC,EAAiDhC,EAAjD,EAAiDA,UAAWiC,EAA5D,EAA4DA,SAA5D,OACX,6BACI,kBAAC,EAAD,MACA,yBAAKjC,UAAU,aACX,4BAAK+B,GACL,uBAAG/B,UAAU,QAAQgC,IAEzB,yBAAKhC,UAAWA,GAAYiC,KC8ErBC,EAnFA,WAAO,IAAD,EACWC,mBAAS,CACjCC,KAAM,GACNC,MAAO,GACPC,SAAU,GACVC,MAAO,GACPC,SAAS,IANI,mBACVC,EADU,KACFC,EADE,KAUTN,EAA0CK,EAA1CL,KAAMC,EAAoCI,EAApCJ,MAAOC,EAA6BG,EAA7BH,SAAUE,EAAmBC,EAAnBD,QAASD,EAAUE,EAAVF,MAElCI,EAAe,SAAAP,GAAI,OAAI,SAAAQ,GACzBF,EAAU,eAAKD,EAAN,aAAcF,OAAO,GAAQH,EAAOQ,EAAMC,OAAOC,WAGxDC,EAAc,SAACH,GJnBH,IAAA9B,EIoBd8B,EAAMI,iBACNN,EAAU,eAAKD,EAAN,CAAcF,OAAO,MJrBhBzB,EIsBP,CAAEsB,OAAMC,QAAOC,YJrBnBlB,MAAM,GAAD,OAAIpC,EAAJ,WAAkB,CAC1BqC,OAAQ,OACR4B,QAAS,CACLC,OAAQ,mBACR,eAAgB,oBAEpBC,KAAM9D,KAAK+D,UAAUtC,KAEpBQ,MAAK,SAAAC,GACF,OAAOA,EAAS8B,UAEnB3B,OAAM,SAAAC,GACHH,QAAQC,IAAIE,OIUXL,MAAK,SAAAgC,GACEA,EAAKf,MACLG,EAAU,eAAKD,EAAN,CAAcF,MAAOe,EAAKf,MAAOC,SAAS,KAEnDE,EAAU,eACHD,EADE,CAELL,KAAM,GACNC,MAAO,GACPC,SAAU,GACVC,MAAO,GACPC,SAAS,SAwC7B,OACI,kBAAC,EAAD,CACIT,MAAM,UACNC,YAAY,wBACZhC,UAAU,kCAXd,yBACIA,UAAU,mBACVC,MAAO,CAAEsD,QAASf,EAAU,GAAK,SAFrC,kCAGmC,kBAAC,IAAD,CAAM5B,GAAG,WAAT,WAXnC,yBACIZ,UAAU,qBACVC,MAAO,CAAEsD,QAAShB,EAAQ,GAAK,SAC9BA,GArBL,8BACI,yBAAKvC,UAAU,cACX,2BAAOA,UAAU,cAAjB,QACA,2BAAOwD,SAAUb,EAAa,QAASc,KAAK,OAAOzD,UAAU,eAAe8C,MAAOV,KAEvF,yBAAKpC,UAAU,cACX,2BAAOA,UAAU,cAAjB,SACA,2BAAOwD,SAAUb,EAAa,SAAUc,KAAK,QAAQzD,UAAU,eAAe8C,MAAOT,KAEzF,yBAAKrC,UAAU,cACX,2BAAOA,UAAU,cAAjB,YACA,2BAAOwD,SAAUb,EAAa,YAAac,KAAK,WAAWzD,UAAU,eAAe8C,MAAOR,KAE/F,4BAAQrB,QAAS8B,EAAa/C,UAAU,mBAAxC,aCuCG0D,EAzFA,WAAO,IAAD,EACWvB,mBAAS,CACjCE,MAAO,GACPC,SAAU,GACVC,MAAO,GACPoB,SAAS,EACTC,oBAAoB,IANP,mBACVnB,EADU,KACFC,EADE,KAUTL,EAAwDI,EAAxDJ,MAAOC,EAAiDG,EAAjDH,SAAUqB,EAAuClB,EAAvCkB,QAASpB,EAA8BE,EAA9BF,MAAOqB,EAAuBnB,EAAvBmB,mBAClC9C,EAAQ7B,IAAR6B,KAED6B,EAAe,SAAAP,GAAI,OAAI,SAAAQ,GACzBF,EAAU,eAAKD,EAAN,aAAcF,OAAO,GAAQH,EAAOQ,EAAMC,OAAOC,WAGxDC,EAAc,SAAAH,GAChBA,EAAMI,iBACNN,EAAU,eAAKD,EAAN,CAAcF,OAAO,EAAOoB,SAAS,KLLhC,SAAA7C,GAClB,OAAOM,MAAM,GAAD,OAAIpC,EAAJ,WAAkB,CAC1BqC,OAAQ,OACR4B,QAAS,CACLC,OAAQ,mBACR,eAAgB,oBAEpBC,KAAM9D,KAAK+D,UAAUtC,KAEpBQ,MAAK,SAAAC,GACF,OAAOA,EAAS8B,UAEnB3B,OAAM,SAAAC,GACHH,QAAQC,IAAIE,MKPhBkC,CAAO,CAAExB,QAAOC,aACXhB,MAAK,SAAAgC,GACEA,EAAKf,MACLG,EAAU,eAAKD,EAAN,CAAcF,MAAOe,EAAKf,MAAOoB,SAAS,KLQ3C,SAACL,EAAMpC,GACV,qBAAXhC,SACNC,aAAa2E,QAAQ,MAAOzE,KAAK+D,UAAUE,IAC3CpC,KKTY6C,CAAaT,GAAM,WACfZ,EAAU,eACHD,EADE,CAELmB,oBAAoB,YA+C5C,OACI,kBAAC,EAAD,CACI7B,MAAM,UACNC,YAAY,wBACZhC,UAAU,kCArBd2D,GAAY,yBAAK3D,UAAU,oBACvB,2CATJ,yBACIA,UAAU,qBACVC,MAAO,CAAEsD,QAAShB,EAAQ,GAAK,SAC9BA,GAjBL,8BACI,yBAAKvC,UAAU,cACX,2BAAOA,UAAU,cAAjB,SACA,2BAAOwD,SAAUb,EAAa,SAAUc,KAAK,QAAQzD,UAAU,eAAe8C,MAAOT,KAEzF,yBAAKrC,UAAU,cACX,2BAAOA,UAAU,cAAjB,YACA,2BAAOwD,SAAUb,EAAa,YAAac,KAAK,WAAWzD,UAAU,eAAe8C,MAAOR,KAE/F,4BAAQrB,QAAS8B,EAAa/C,UAAU,mBAAxC,WAkBD4D,EACG9C,GAAsB,IAAdA,EAAKC,KACJ,kBAAC,IAAD,CAAUH,GAAG,qBAEb,kBAAC,IAAD,CAAUA,GAAG,oBAGzB3B,IACQ,kBAAC,IAAD,CAAU2B,GAAG,yBADxB,I,iBCxEKoD,EAAc,SAACC,GACxB,OAAO7C,MAAM,GAAD,OAAIpC,EAAJ,4BAA2BiF,EAA3B,sBAAuD,CAC/D5C,OAAQ,QAEXC,MAAK,SAAAC,GACF,OAAOA,EAAS8B,UAEnB3B,OAAM,SAAAC,GAAG,OAAIH,QAAQC,IAAIE,OAIjBuC,EAAgB,WACzB,OAAO9C,MAAM,GAAD,OAAIpC,EAAJ,eAAsB,CAC9BqC,OAAQ,QAEXC,MAAK,SAAAC,GACF,OAAOA,EAAS8B,UAEnB3B,OAAM,SAAAC,GAAG,OAAIH,QAAQC,IAAIE,OAIjBwC,EAAsB,SAACC,EAAMC,GAAyB,IAAlBC,EAAiB,uDAAP,GACjDhB,EAAO,CACTe,QACAD,OACAE,WAEJ,OAAOlD,MAAM,GAAD,OAAIpC,EAAJ,uBAA8B,CACtCqC,OAAQ,OACR4B,QAAS,CACLC,OAAQ,mBACR,eAAgB,oBAEpBC,KAAM9D,KAAK+D,UAAUE,KAEpBhC,MAAK,SAAAC,GACF,OAAOA,EAAS8B,UAEnB3B,OAAM,SAAAC,GACHH,QAAQC,IAAIE,OC7BT4C,EAXG,SAAC,GAAD,IAAEC,EAAF,EAAEA,KAAMC,EAAR,EAAQA,IAAR,OACd,yBAAKzE,UAAU,eACX,yBACIO,IAAG,UAAKvB,EAAL,YAAYyF,EAAZ,kBAAyBD,EAAKE,KACjClE,IAAKgE,EAAKpC,KAAMpC,UAAU,OAC1BC,MAAO,CAAC0E,OAAQ,S,iBCgHbC,EAlHF,SAAC,GAQP,IAPHC,EAOE,EAPFA,QAOE,IANFC,6BAME,aALFC,2BAKE,aAJFC,kBAIE,aAHFC,+BAGE,aAFFC,cAEE,MAFO,SAAAC,GAAC,OAAIA,GAEZ,MADFC,WACE,WADIC,EACJ,IAE8BlD,oBAAS,GAFvC,mBAEKmD,EAFL,KAEeC,EAFf,OAGwBpD,mBAAS0C,EAAQW,OAHzC,mBAGKA,EAHL,KAGYC,EAHZ,KAeIC,EAAY,YN7BC,WAA0C,IAAzClB,EAAwC,uDAAjC,GAAetD,GAAkB,+GAAX,SAAAiE,GAAC,OAAIA,IAClDQ,EAAO,GACW,qBAAXzG,SACHC,aAAaC,QAAQ,UACrBuG,EAAOtG,KAAKC,MAAMH,aAAaC,QAAQ,UAE3CuG,EAAK9D,KAAL,eACO2C,EADP,CAEIgB,MAAO,KAYXG,EAAOC,MAAMC,KAAK,IAAIC,IAAIH,EAAKI,KAAI,SAAAC,GAAC,OAAIA,EAAEtB,SAAOqB,KAAI,SAAAE,GACjD,OAAON,EAAKO,MAAK,SAAAF,GAAC,OAAIA,EAAEtB,MAAQuB,QAGpC9G,aAAa2E,QAAQ,OAAQzE,KAAK+D,UAAUuC,IAC5CzE,KMMAiF,CAAQtB,EAASU,GAAY,KA2B3B5C,EAAe,SAAAyD,GAAS,OAAI,SAAAxD,GAC9BsC,GAAQE,GACRK,EAAS7C,EAAMC,OAAOC,MAAQ,EAAI,EAAIF,EAAMC,OAAOC,OAC/CF,EAAMC,OAAOC,OAAS,GNdR,SAACsD,EAAWZ,GAClC,IAAIG,EAAO,GACW,qBAAXzG,SACHC,aAAaC,QAAQ,UACrBuG,EAAOtG,KAAKC,MAAMH,aAAaC,QAAQ,UAG3CuG,EAAKI,KAAI,SAAClB,EAASwB,GACXxB,EAAQH,MAAQ0B,IAChBT,EAAKU,GAAGb,MAAQA,MAIxBrG,aAAa2E,QAAQ,OAAQzE,KAAK+D,UAAUuC,KMExCW,CAAWF,EAAWxD,EAAMC,OAAOC,SAmC3C,OACI,yBAAK9C,UAAU,QACX,yBAAKA,UAAU,OAAOC,MAAO,CAACL,gBAAiB,YAC3C,yBAAKI,UAAU,mBAAmBC,MAAO,CAACL,gBAAiB,UAAWC,MAAO,UAAWQ,WAAW,SAAUwE,EAAQzC,MACrH,yBAAKpC,UAAU,YAAYC,MAAO,CAACL,gBAAiB,YAnEzC,SAAA0F,GACnB,GAAIA,EACA,OAAO,kBAAC,IAAD,CAAU1E,GAAG,UAkEX2F,CAAejB,GAChB,kBAAC,EAAD,CAAWtF,UAAU,SAASwE,KAAMK,EAASJ,IAAI,YACjD,uBAAGzE,UAAU,gBAAgB6E,EAAQ7C,YAAYwE,UAAU,EAAG,MAC9D,uBAAGxG,UAAU,SAASC,MAAO,CAAEJ,MAAO,QAASQ,WAAY,SAA3D,SAAuEwE,EAAQ4B,OAC/E,uBAAGzG,UAAU,WAAU,wCAAvB,KAA0C6E,EAAQ6B,UAAY7B,EAAQ6B,SAAStE,MAC/E,uBAAGpC,UAAU,UAAUC,MAAO,CAAEJ,MAAO,SAAvC,YAA2D8G,IAAO9B,EAAQ+B,WAAWC,WAC1EhC,EAAQiC,SAzDb,EACd,0BAAM9G,UAAU,uCAAhB,aAEI,0BAAMA,UAAU,kCAAhB,iBAuDI,6BA1FO,SAAA8E,GACnB,OACIA,GACI,kBAAC,IAAD,CAAMlE,GAAE,mBAAciE,EAAQH,KAAO1E,UAAU,QAC3C,4BAAQA,UAAU,wCAAlB,iBAuFC+G,CAAejC,GAtEP,SAAAC,GACrB,OACIA,GACI,4BAAQ9D,QAASyE,EAAW1F,UAAU,0CAAtC,eAoEKgH,CAAiBjC,GA9BT,SAAAE,GACrB,OACEA,GACE,4BACEhE,QAAS,YNrBG,SAAAmF,GACtB,IAAIT,EAAO,GACW,qBAAXzG,SACHC,aAAaC,QAAQ,UACrBuG,EAAOtG,KAAKC,MAAMH,aAAaC,QAAQ,UAG3CuG,EAAKI,KAAI,SAAClB,EAASwB,GACXxB,EAAQH,MAAQ0B,GAChBT,EAAKsB,OAAOZ,EAAG,MAIvBlH,aAAa2E,QAAQ,OAAQzE,KAAK+D,UAAUuC,KMSpCxE,CAAW0D,EAAQH,KACnBQ,GAAQE,IAEVpF,UAAU,oCALZ,kBA4BSkH,CAAiBjC,GA9CJ,SAAAD,GAC1B,OACIA,GACI,6BACI,yBAAKhF,UAAU,oBACX,yBAAKA,UAAU,uBACX,0BAAMA,UAAU,oBAAhB,oBAEJ,2BAAOyD,KAAK,SAASzD,UAAU,eAAe8C,MAAO0C,EAAOhC,SAAUb,EAAakC,EAAQH,SAuC9FyC,CAAsBnC,OCS5BoC,EAtHA,WAAO,IAAD,EACOjF,mBAAS,CAC7BkF,WAAY,GACZX,SAAU,GACVY,OAAQ,GACRC,QAAS,GACTC,UAAU,IANG,mBACVlE,EADU,KACJmE,EADI,KASTJ,EAAoD/D,EAApD+D,WAAYX,EAAwCpD,EAAxCoD,SAAUY,EAA8BhE,EAA9BgE,OAAQC,EAAsBjE,EAAtBiE,QAASC,EAAalE,EAAbkE,SAY/CE,qBAAU,WATNxD,IAAgB5C,MAAK,SAAAgC,GACbA,EAAKf,MACLf,QAAQC,IAAI6B,EAAKf,OAEjBkF,EAAQ,eAAKnE,EAAN,CAAY+D,WAAY/D,UAOxC,IAEH,IAAMqE,EAAa,WAEXL,GHgBQ,SAAAM,GAChB,IAAMC,EAAQC,IAAY1E,UAAUwE,GAEpC,OADApG,QAAQC,IAAI,QAASoG,GACdzG,MAAM,GAAD,OAAIpC,EAAJ,4BAA2B6I,GAAS,CAC5CxG,OAAQ,QAEPC,MAAK,SAAAC,GACF,OAAOA,EAAS8B,UAEnB3B,OAAM,SAAAC,GAAG,OAAIH,QAAQC,IAAIE,MGxBtBoG,CAAK,CAAET,OAAQA,QAAUjC,EAAWqB,SAAUA,IAAYpF,MACtD,SAAAC,GACQA,EAASgB,MACTf,QAAQC,IAAIF,EAASgB,OAErBkF,EAAQ,eAAKnE,EAAN,CAAYiE,QAAShG,EAAUiG,UAAU,SAO9DQ,EAAe,SAAAC,GACjBA,EAAEjF,iBACF2E,KAGEhF,EAAe,SAAAP,GAAI,OAAI,SAAAQ,GAAU,IAAD,EAClC6E,EAAQ,eAAKnE,GAAN,mBAAalB,EAAOQ,EAAMC,OAAOC,OAAjC,0BAAkD,GAAlD,OAGLoF,EAAgB,SAACV,EAAUD,GAC7B,OAAIC,GAAYD,EAAQ1G,OAAS,EACvB,SAAN,OAAgB0G,EAAQ1G,OAAxB,aAEA2G,GAAYD,EAAQ1G,OAAS,EACvB,yBADV,GAuDJ,OACI,yBAAKb,UAAU,OACX,yBAAKA,UAAU,kBAjCnB,0BAAMmI,SAAUH,GACZ,0BAAMhI,UAAU,oBACZ,yBAAKA,UAAU,8BACX,yBAAKA,UAAU,uBACX,4BACIA,UAAU,WACVwD,SAAUb,EAAa,aAEvB,4BAAQG,MAAM,OAAd,OACCuE,EAAWtB,KAAI,SAACqC,EAAG/B,GAAJ,OACZ,4BAAQgC,IAAKhC,EAAGvD,MAAOsF,EAAE1D,KACpB0D,EAAEhG,WAMnB,2BACIqB,KAAK,SACLzD,UAAU,eACVwD,SAAUb,EAAa,UACvB2F,YAAY,oBAGpB,yBAAKtI,UAAU,WAAWC,MAAO,CAAEsI,OAAQ,SACvC,4BAAQ9E,KAAK,SAASzD,UAAU,mBAAhC,cASR,yBAAKA,UAAU,wBArDE,WAAmB,IAAlBuH,EAAiB,uDAAP,GAChC,OACI,6BACI,wBAAIvH,UAAU,aACTkI,EAAcV,EAAUD,IAG7B,yBAAKvH,UAAU,OACVuH,EAAQxB,KAAI,SAAClB,EAASwB,GAAV,OACT,yBAAKrG,UAAU,cACX,kBAAC,EAAD,CAAMqI,IAAKhC,EAAGxB,QAASA,UA4ClC2D,CAAiBjB,MCxDnBkB,EAtDF,WAAO,IAAD,EAC6BtG,mBAAS,IADtC,mBACRuG,EADQ,KACQC,EADR,OAEmCxG,mBAAS,IAF5C,mBAERyG,EAFQ,KAEWC,EAFX,OAGW1G,oBAAS,GAHpB,mBAGD2G,GAHC,WA8Bf,OALApB,qBAAU,WATN1D,EAAY,aAAa1C,MAAK,SAAAgC,GACtBA,EAAKf,MACLuG,EAASxF,EAAKf,OAEdsG,EAAqBvF,MAd7BU,EAAY,QAAQ1C,MAAK,SAAAgC,GACjBA,EAAKf,MACLuG,EAASxF,EAAKf,OAEdoG,EAAkBrF,QAkB3B,IAGC,kBAAC,EAAD,CAAQvB,MAAM,OAAOC,YAAY,yBAAyBhC,UAAU,mBAChE,kBAAC,EAAD,MACA,wBAAIA,UAAU,QAAd,gBACA,yBAAKA,UAAU,wBACV4I,EAAkB7C,KAAI,SAAClB,EAASwB,GAAV,OACnB,yBAAKgC,IAAKhC,EAAGrG,UAAU,oCACnB,kBAAC,EAAD,CAAM6E,QAASA,SAK3B,wBAAI7E,UAAU,QAAd,iBACA,yBAAKA,UAAU,wBACV0I,EAAe3C,KAAI,SAAClB,EAASwB,GAAV,OAChB,yBAAKgC,IAAKhC,EAAGrG,UAAU,oCACnB,kBAAC,EAAD,CAAM6E,QAASA,W,QCrCxBkE,EAXK,SAAC,GAAD,IAAcC,EAAd,EAAGC,UAAyBC,EAA5B,oCAChB,kBAAC,IAAD,iBACQA,EADR,CAEIC,OAAQ,SAAAC,GAAK,OACTnK,IACA,kBAAC+J,EAAcI,GAEnB,kBAAC,IAAD,CAAUxI,GAAI,CAACjB,SAAU,UAAW0J,MAAO,CAACxD,KAAMuD,EAAM1J,kBCsGjD4J,EA1GG,WAAO,IAAD,EACUnH,mBAAS,IADnB,mBACb3C,EADa,KACJ+J,EADI,OAKhBtK,IADA6B,KAAQ4D,EAJQ,EAIRA,IAAKtC,EAJG,EAIHA,KAAMC,EAJH,EAIGA,MAAOtB,EAJV,EAIUA,KAExByI,EAAQvK,IAAkBuK,MAE1BC,EAAO,SAACC,EAAQF,IC6BQ,SAACE,EAAQF,GACvC,OAAOpI,MAAM,GAAD,OAAIpC,EAAJ,2BAA0B0K,GAAU,CAC5CrI,OAAQ,MACR4B,QAAS,CACLC,OAAQ,mBACR,eAAgB,mBAChByG,cAAc,UAAD,OAAYH,MAG5BlI,MAAK,SAAAC,GACF,OAAOA,EAAS8B,UAEnB3B,OAAM,SAAAC,GAAG,OAAIH,QAAQC,IAAIE,ODxC1BiI,CAAmBF,EAAQF,GAAOlI,MAAK,SAAAgC,GAC/BA,EAAKf,MACLf,QAAQC,IAAI6B,EAAKf,OAEjBgH,EAAWjG,OAKvBoE,qBAAU,WACN+B,EAAK/E,EAAK8E,KACX,IAqEH,OACI,kBAAC,EAAD,CACIzH,MAAM,YACNC,YAAW,gBAAWI,EAAX,KACXpC,UAAU,mBAEV,yBAAKA,UAAU,OACX,yBAAKA,UAAU,oCAxEnB,yBAAKA,UAAU,QACX,wBAAIA,UAAU,eAAd,cACA,wBAAIA,UAAU,cACV,wBAAIA,UAAU,mBACV,kBAAC,IAAD,CAAMA,UAAU,WAAWY,GAAG,SAA9B,YAIJ,wBAAIZ,UAAU,mBACV,kBAAC,IAAD,CAAMA,UAAU,WAAWY,GAAE,mBAAc8D,IAA3C,sBAgER,yBAAK1E,UAAU,+BArDnB,yBAAKA,UAAU,aACX,wBAAIA,UAAU,eAAd,oBACA,wBAAIA,UAAU,cACV,wBAAIA,UAAU,mBAAmBoC,GACjC,wBAAIpC,UAAU,mBAAmBqC,GACjC,wBAAIrC,UAAU,mBACA,IAATe,EAAa,QAAU,qBAOpB,SAAAvB,GACpB,OACI,yBAAKQ,UAAU,8BACX,wBAAIA,UAAU,eAAd,oBACA,wBAAIA,UAAU,eACV,wBAAIA,UAAU,mBACTR,EAAQuG,KAAI,SAAC8D,EAAGxD,GACb,OACI,6BACKwD,EAAEC,SAAS/D,KAAI,SAACC,EAAGK,GAChB,OACI,yBAAKgC,IAAKhC,EAAGrG,UAAU,YACnB,wBAAIA,UAAU,kCAAkCgG,EAAE5D,MAClD,wBAAIpC,UAAU,aAAd,gBACagG,EAAES,OAEf,wBAAIzG,UAAU,QAAd,QACU,IACL2G,IAAOkD,EAAEjD,WAAWC,sBAwBpDkD,CAAgBvK,OE3FtBwK,EAXG,SAAC,GAAD,IAAchB,EAAd,EAAGC,UAAyBC,EAA5B,oCACd,kBAAC,IAAD,iBACQA,EADR,CAEIC,OAAQ,SAAAC,GAAK,OACTnK,KAAqD,IAAhCA,IAAkB6B,KAAKC,KAC5C,kBAACiI,EAAcI,GAEnB,kBAAC,IAAD,CAAUxI,GAAI,CAACjB,SAAU,UAAW0J,MAAO,CAACxD,KAAMuD,EAAM1J,kBCyDjDuK,EA/DQ,WAAO,IAAD,EAEgBhL,IAAlC6B,KAAYsB,GAFM,EAEXsC,IAFW,EAENtC,MAAMC,EAFA,EAEAA,MAAOtB,EAFP,EAEOA,KA+ChC,OACI,kBAAC,EAAD,CAAQgB,MAAM,YAAYC,YAAW,iBAAaI,GAAQpC,UAAU,aAChE,yBAAKA,UAAU,OACX,yBAAKA,UAAU,oCA9CnB,yBAAKA,UAAU,QACX,wBAAIA,UAAU,eAAd,cACA,wBAAIA,UAAU,cACV,wBAAIA,UAAU,mBACV,kBAAC,IAAD,CAAMA,UAAU,WAAWY,GAAG,oBAA9B,oBAIJ,wBAAIZ,UAAU,mBACV,kBAAC,IAAD,CAAMA,UAAU,WAAWY,GAAG,mBAA9B,mBAIJ,wBAAIZ,UAAU,mBACV,kBAAC,IAAD,CAAMA,UAAU,WAAWY,GAAG,iBAA9B,gBAIJ,wBAAIZ,UAAU,mBACV,kBAAC,IAAD,CAAMA,UAAU,WAAWY,GAAG,mBAA9B,uBA8BR,yBAAKZ,UAAU,+BAnBnB,yBAAKA,UAAU,aACX,wBAAIA,UAAU,eAAd,qBAGA,wBAAIA,UAAU,cACV,wBAAIA,UAAU,mBAAmBoC,GACjC,wBAAIpC,UAAU,mBAAmBqC,GACjC,wBAAIrC,UAAU,mBAA4B,IAATe,EAAa,QAAU,yBCX/DmD,EAAgB,WACzB,OAAO9C,MAAM,GAAD,OAAIpC,EAAJ,eAAsB,CAC9BqC,OAAQ,QAEXC,MAAK,SAAAC,GACF,OAAOA,EAAS8B,UAEnB3B,OAAM,SAAAC,GAAG,OAAIH,QAAQC,IAAIE,OCqCfuI,EA3EK,WAAO,IAAD,EACC/H,mBAAS,IADV,mBAChBC,EADgB,KACV+H,EADU,OAGGhI,oBAAS,GAHZ,mBAGhBI,EAHgB,KAGTuG,EAHS,OAKO3G,oBAAS,GALhB,mBAKhBK,EALgB,KAKP4H,EALO,OASAnL,IAAf6B,EATe,EASfA,KAAM0I,EATS,EASTA,MAEP7G,EAAe,SAAAsF,GACjBa,EAAS,IACTqB,EAAQlC,EAAEpF,OAAOC,QAGfC,EAAc,SAAAkF,GAChBA,EAAEjF,iBACF8F,EAAS,IACTsB,GAAW,GDvBW,SAACV,EAAQF,EAAO9C,GAC1C,OAAOtF,MAAM,GAAD,OAAIpC,EAAJ,4BAA2B0K,GAAU,CAC7CrI,OAAQ,OACR4B,QAAS,CACLC,OAAQ,mBACR,eAAgB,mBAChByG,cAAc,UAAD,OAAYH,IAE7BrG,KAAM9D,KAAK+D,UAAUsD,KAEpBpF,MAAK,SAAAC,GACF,OAAOA,EAAS8B,UAEnB3B,OAAM,SAAAC,GACHH,QAAQC,IAAIE,MCWhB0I,CAAevJ,EAAK4D,IAAK8E,EAAO,CAACpH,SAChCd,MAAK,SAAAgC,GACF9B,QAAQC,IAAI6B,EAAKf,OACbe,EAAKf,MACLuG,GAAS,IAETA,EAAS,IACTsB,GAAW,QAiCvB,OACI,kBAAC,EAAD,CAAQrI,MAAM,qBAAqBC,YAAW,gBAAYlB,EAAKsB,KAAjB,kDAC1C,yBAAKpC,UAAU,OACX,yBAAKA,UAAU,wBAfT,WACd,GAAGuC,EACC,OAAO,wBAAIvC,UAAU,eAAd,6BAcEsK,GAtBG,WAChB,GAAG9H,EACC,OAAO,wBAAIxC,UAAU,gBAAd,YAAsC,2BAAIoC,GAA1C,eAqBEmI,GAhCb,0BAAMpC,SAAUpF,EAAa/C,UAAU,eACnC,yBAAKA,UAAU,wBACX,2BAAOA,UAAU,cAAjB,QACA,2BAAOyD,KAAK,OAAOzD,UAAU,eAAewD,SAAUb,EAAcG,MAAOV,EAAMoI,WAAS,EAACC,UAAQ,KAEnG,4BAAQzK,UAAU,2BAAlB,oBAiBR,yBAAKA,UAAU,QACX,kBAAC,IAAD,CAAMY,GAAG,mBAAmBZ,UAAU,gBAAtC,0BCoGG0K,EA7JI,WAAM,IAAD,EAEQvI,mBAAS,CACjCC,KAAM,GACNJ,YAAa,GACbyE,MAAO,GACPY,WAAY,GACZX,SAAU,GACViE,SAAU,GACV7D,SAAU,GACV8D,MAAO,GACPjH,SAAS,EACTpB,MAAO,GACPsI,eAAgB,GAChBC,mBAAmB,EACnBC,SAAU,KAfM,mBAEbtI,EAFa,KAELC,EAFK,OAkBEzD,IAAf6B,EAlBa,EAkBbA,KAAM0I,EAlBO,EAkBPA,MAGTpH,EAYAK,EAZAL,KACAJ,EAWAS,EAXAT,YACAyE,EAUAhE,EAVAgE,MACAY,EASA5E,EATA4E,WAGAP,GAMArE,EARAiE,SAQAjE,EAPAkI,SAOAlI,EANAqE,UACAnD,EAKAlB,EALAkB,QACApB,EAIAE,EAJAF,MACAsI,EAGApI,EAHAoI,eAEAE,GACAtI,EAFAqI,kBAEArI,EADAsI,UAeJrD,qBAAU,WATNxD,IAAgB5C,MAAK,SAAAgC,GACdA,EAAKf,MACJG,EAAU,eAAID,EAAL,CAAaF,MAAOe,EAAKf,SAElCG,EAAU,eAAID,EAAL,CAAa4E,WAAY/D,EAAMyH,SAAU,IAAIC,iBAOhE,IAEF,IAAMrI,EAAe,SAAAP,GAAI,OAAI,SAAAQ,GACzB,IAAME,EAAiB,UAATV,EAAmBQ,EAAMC,OAAOoI,MAAM,GAAKrI,EAAMC,OAAOC,MACtEiI,EAASG,IAAI9I,EAAMU,GACnBJ,EAAU,eAAID,EAAL,eAAaL,EAAOU,OAG3BC,EAAc,SAACH,GACjBA,EAAMI,iBACNN,EAAU,eAAID,EAAL,CAAaF,MAAM,GAAIoB,SAAS,KF7CpB,SAAC+F,EAAQF,EAAO3E,GACzC,OAAOzD,MAAM,GAAD,OAAIpC,EAAJ,2BAA0B0K,GAAU,CAC5CrI,OAAQ,OACR4B,QAAS,CACLC,OAAQ,mBACRyG,cAAc,UAAD,OAAYH,IAE7BrG,KAAM0B,IAELvD,MAAK,SAAAC,GACF,OAAOA,EAAS8B,UAEnB3B,OAAM,SAAAC,GACHH,QAAQC,IAAIE,MEkChBwJ,CAAcrK,EAAK4D,IAAK8E,EAAOuB,GAC9BzJ,MAAK,SAAAgC,GACCA,EAAKf,MACJG,EAAU,eAAID,EAAL,CAAaF,MAAOe,EAAKf,SAElCG,EAAU,eACHD,EADE,CACML,KAAM,GACjBJ,YAAa,GACb8E,SAAU,GACV8D,MAAO,GACPjH,SAAS,EACTkH,eAAgBvH,EAAKlB,YAuErC,OACI,kBAAC,EAAD,CAAQL,MAAM,oBAAoBC,YAAW,gBAAYlB,EAAKsB,KAAjB,qCACzC,yBAAKpC,UAAU,OACX,yBAAKA,UAAU,wBAlBvB,yBAAKA,UAAU,qBAAqBC,MAAO,CAACsD,QAAShB,EAAQ,GAAK,SAC7DA,GAWLoB,GAAY,yBAAK3D,UAAU,uBAAsB,2CANjD,yBAAKA,UAAU,mBAAmBC,MAAO,CAACsD,QAASsH,EAAiB,GAAK,SACrE,sCAAQA,GAAR,iBAxDJ,0BAAM7K,UAAU,OAAOmI,SAAUpF,GAC7B,0CACA,yBAAK/C,UAAU,cACX,2BAAOA,UAAU,qBACb,2BAAOwD,SAAUb,EAAa,SAAUc,KAAK,OAAOrB,KAAK,QAAQgJ,OAAO,cAGhF,yBAAKpL,UAAU,cACX,2BAAOA,UAAU,cAAjB,QACA,2BAAOwD,SAAUb,EAAa,QAASc,KAAK,OAAOzD,UAAU,eAAe8C,MAAOV,KAEvF,yBAAKpC,UAAU,cACX,2BAAOA,UAAU,cAAjB,eACA,8BAAUwD,SAAUb,EAAa,eAAgB3C,UAAU,eAAe8C,MAAOd,KAErF,yBAAKhC,UAAU,cACX,2BAAOA,UAAU,cAAjB,SACA,2BAAOwD,SAAUb,EAAa,SAAUc,KAAK,SAASzD,UAAU,eAAe8C,MAAO2D,KAE1F,yBAAKzG,UAAU,cACX,2BAAOA,UAAU,cAAjB,YACA,4BAAQwD,SAAUb,EAAa,YAAa3C,UAAU,gBAClD,iDACKqH,GAAcA,EAAWtB,KAAI,SAACqC,EAAE/B,GAAH,OAC1B,4BAAQgC,IAAKhC,EAAGvD,MAAOsF,EAAE1D,KAAzB,IAAgC0D,EAAEhG,KAAlC,UAKhB,yBAAKpC,UAAU,cACX,2BAAOA,UAAU,cAAjB,YACA,2BAAOwD,SAAUb,EAAa,YAAac,KAAK,SAASzD,UAAU,eAAe8C,MAAOgE,KAE7F,yBAAK9G,UAAU,cACX,2BAAOA,UAAU,cAAjB,YACA,4BAAQwD,SAAUb,EAAa,YAAa3C,UAAU,gBACtD,iDACI,4BAAQ8C,MAAM,KAAd,MACA,4BAAQA,MAAM,KAAd,SAIR,4BAAQ9C,UAAU,2BAAlB,uB,QChGGqL,EA5BE,SAAC,GAAiC,IAAhChE,EAA+B,EAA/BA,WAAYiE,EAAmB,EAAnBA,cAAmB,EAEhBnJ,mBAAS,IAFO,mBAEvCoJ,EAFuC,KAE9BC,EAF8B,KAIxCC,EAAe,SAAArD,GAAC,OAAI,WACtB,IAAMsD,EAAoBH,EAAQI,QAAQvD,GACpCwD,EAAoB,YAAOL,IAEP,IAAvBG,EACCE,EAAqB/J,KAAKuG,GAE1BwD,EAAqB3E,OAAOyE,EAAmB,GAGnDF,EAAWI,GACXN,EAAcM,KAGlB,OAAOvE,EAAWtB,KAAI,SAACqC,EAAE/B,GAAH,OAClB,wBAAIgC,IAAKhC,EAAGrG,UAAU,iBAClB,2BAAOwD,SAAUiI,EAAarD,EAAE1D,KAAM5B,MAAOyI,EAAQI,SAAmB,IAAXvD,EAAE1D,KAAajB,KAAK,WAAWzD,UAAU,qBACtG,2BAAOA,UAAU,oBACZoI,EAAEhG,WCDJyJ,EAtBE,SAAC,GAA+B,IAA7BC,EAA4B,EAA5BA,OAAQR,EAAoB,EAApBA,cAAoB,EAClBnJ,mBAAS,GADS,mBAC9B4J,GAD8B,WAGtCpJ,EAAe,SAAAC,GACjB0I,EAAc1I,EAAMC,OAAOC,OAC3BiJ,EAASnJ,EAAMC,OAAOC,QAG1B,OAAOgJ,EAAO/F,KAAI,SAACC,EAAGK,GAAJ,OACd,yBAAKgC,IAAKhC,GACN,2BACI7C,SAAUb,EACVG,MAAK,UAAKkD,EAAEtB,KACZtC,KAAM4D,EACNvC,KAAK,QACLzD,UAAU,cAEd,2BAAOA,UAAU,oBAAoBgG,EAAE5D,WCnBtC0J,EAAS,CAClB,CACIpH,IAAK,EACLtC,KAAM,MACN4J,MAAO,IAEX,CACItH,IAAK,EACLtC,KAAM,gBACN4J,MAAO,CAAC,EAAG,KAEf,CACItH,IAAK,EACLtC,KAAM,yBACN4J,MAAO,CAAC,IAAK,MAEjB,CACItH,IAAK,EACLtC,KAAM,yBACN4J,MAAO,CAAC,IAAK,MAEjB,CACItH,IAAK,EACLtC,KAAM,yBACN4J,MAAO,CAAC,IAAK,MAEjB,CACItH,IAAK,EACLtC,KAAM,sBACN4J,MAAO,CAAC,IAAK,QCgHNC,EArIF,WAAO,IAAD,EACmB9J,mBAAS,CACvCmC,QAAS,CAAEoC,SAAU,GAAID,MAAO,MAFrB,mBACRyF,EADQ,KACGC,EADH,OAKqBhK,mBAAS,IAL9B,mBAKRkF,EALQ,KAKI+E,EALJ,OAMWjK,oBAAS,GANpB,mBAMD2G,GANC,aAOW3G,mBAAS,GAPpB,mBAORkC,EAPQ,aAQSlC,mBAAS,IARlB,mBAQRiC,EARQ,KAQFiI,EARE,OASSlK,mBAAS,GATlB,mBASRmK,EATQ,KASFC,EATE,OAU+BpK,mBAAS,IAVxC,mBAURqK,EAVQ,KAUSC,EAVT,KAsBTC,EAAW,WACb,IAAIC,EAASvI,EAAOC,EAEpBF,EAAoBwI,EAAQtI,EAAO6H,EAAU5H,SAAShD,MAAK,SAAAgC,GACnDA,EAAKf,MACLuG,EAASxF,EAAKf,QAEdkK,EAAmB,GAAD,mBAAKD,GAAL,YAAyBlJ,EAAKA,QAChDiJ,EAAQjJ,EAAKgJ,MACbD,EAAQM,QAgBpBjF,qBAAU,WAlCNxD,IAAgB5C,MAAK,SAAAgC,GACdA,EAAKf,MACJuG,EAASxF,EAAKf,OAEd6J,EAAc9I,MAgCtBsJ,EAAoBxI,EAAMC,EAAO6H,EAAU5H,WAC5C,IAEH,IAAMgH,EAAgB,SAAChH,EAASuI,GAC5B,IAAMC,EAAU,eAAQZ,GAGxB,GAFAY,EAAWxI,QAAQuI,GAAYvI,EAEd,UAAbuI,EAAsB,CACtB,IAAIE,EAAcC,EAAY1I,GAC9BwI,EAAWxI,QAAQuI,GAAYE,EAEnCH,EAAoBV,EAAU5H,SAC9B6H,EAAaW,IAGXE,EAAc,SAAAlK,GAChB,IAAMQ,EAAOwI,EACTE,EAAQ,GAEZ,IAAK,IAAI3D,KAAO/E,EACRA,EAAK+E,GAAK3D,MAAQuI,SAASnK,KAC3BkJ,EAAQ1I,EAAK+E,GAAK2D,OAG1B,OAAOA,GAGLY,EAAsB,SAAAE,GAExB3I,EAAoBC,EAAMC,EAAOyI,GAAYxL,MAAK,SAAAgC,GAC1CA,EAAKf,MACLuG,EAASxF,EAAKf,QAEdkK,EAAmBnJ,EAAKA,MACxBiJ,EAAQjJ,EAAKgJ,MACbD,EAAQ,QAKpB,OACI,kBAAC,EAAD,CAAQtK,MAAM,OAAOC,YAAY,oCAAoChC,UAAU,mBAC3E,yBAAKA,UAAU,OACX,yBAAKA,UAAU,iDACX,6BACI,oDACA,4BACI,kBAAC,EAAD,CACIqH,WAAYA,EACZiE,cAAe,SAAAhH,GAAO,OAClBgH,EAAchH,EAAS,iBAKvC,yBAAK4I,UAAU,QACX,qDACA,6BACI,kBAAC,EAAD,CACIpB,OAAQA,EACRR,cAAe,SAAAhH,GAAO,OAClBgH,EAAchH,EAAS,eAM3C,yBAAKtE,UAAU,UACf,wBAAIA,UAAU,QAAd,YACI,yBAAKA,UAAU,wBACVwM,EAAgBzG,KAAI,SAAClB,EAASwB,GAAV,OACb,yBAAKgC,IAAKhC,EAAGrG,UAAU,6CACnB,kBAAC,EAAD,CAAM6E,QAASA,SAI/B,6BAvFRyH,EAAO,GACPA,GAAQjI,GACJ,4BAAQpD,QAASyL,EAAU1M,UAAU,wBAArC,iBCWDmN,EAtDC,SAAA/D,GAAU,IAAD,EACSjH,mBAAS,IADlB,mBACd0C,EADc,KACLuI,EADK,OAEuBjL,mBAAS,IAFhC,mBAEdkL,EAFc,KAEEC,EAFF,OAGKnL,oBAAS,GAHd,mBAGP2G,GAHO,WAKfyE,EAAoB,SAAAnH,IjBiDV,SAAAA,GAChB,OAAOhF,MAAM,GAAD,OAAIpC,EAAJ,oBAAmBoH,GAAa,CACxC/E,OAAQ,QAEPC,MAAK,SAAAC,GACF,OAAOA,EAAS8B,UAEnB3B,OAAM,SAAAC,GAAG,OAAIH,QAAQC,IAAIE,OiBvD1B6L,CAAKpH,GAAW9E,MAAK,SAAAgC,GACbA,EAAKf,MACLuG,EAASxF,EAAKf,QAEd6K,EAAW9J,GjBsDA,SAAA8C,GACvB,OAAOhF,MAAM,GAAD,OAAIpC,EAAJ,6BAA4BoH,GAAa,CACjD/E,OAAQ,QAEPC,MAAK,SAAAC,GACF,OAAOA,EAAS8B,UAEnB3B,OAAM,SAAAC,GAAG,OAAIH,QAAQC,IAAIE,MiB3DlB8L,CAAYnK,EAAKoB,KAAKpD,MAAK,SAAAgC,GACnBA,EAAKf,MACLuG,EAASxF,EAAKf,OAEd+K,EAAkBhK,WAYtC,OALAoE,qBAAU,WACN,IAAMtB,EAAYgD,EAAMsE,MAAM9F,OAAOxB,UACrCmH,EAAkBnH,KACnB,CAACgD,IAGA,kBAAC,EAAD,CACIrH,MAAO8C,GAAWA,EAAQzC,KAC1BJ,YAAa6C,GAAWA,EAAQ7C,aAAe6C,EAAQ7C,YAAYwE,UAAU,EAAG,KAChFxG,UAAU,mBAEV,yBAAKA,UAAU,OACX,yBAAKA,UAAU,SACV6E,GAAWA,EAAQ7C,aAChB,kBAAC,EAAD,CAAM6C,QAASA,EAASC,uBAAuB,KAIvD,yBAAK9E,UAAU,SACX,gDACCqN,EAAetH,KAAI,SAACC,EAAGK,GAAJ,OAChB,yBAAKrG,UAAU,OAAOqI,IAAKhC,GACvB,kBAAC,EAAD,CAAMxB,QAASmB,Y,iBCoH5B2H,EA9JE,SAAC,GAAoD,IAAlD7D,EAAiD,EAAjDA,SAAiD,IAAvC5E,cAAuC,MAA9B,SAAAC,GAAC,OAAIA,GAAyB,MAAtBC,WAAsB,WAAhBC,EAAgB,IACzClD,mBAAS,CAC7BwB,SAAS,EACTnB,SAAS,EACToL,YAAa,KACbrL,MAAO,GACPsL,SAAU,GACVC,QAAS,KAPoD,mBAC1DxK,EAD0D,KACpDmE,EADoD,KAU3DiC,EAASzK,KAAqBA,IAAkB6B,KAAK4D,IACrD8E,EAAQvK,KAAqBA,IAAkBuK,MAE/CuE,EAAW,SAACrE,EAAQF,IlB0DS,SAACE,EAAQF,GAC5C,OAAOpI,MAAM,GAAD,OAAIpC,EAAJ,+BAA8B0K,GAAU,CAChDrI,OAAQ,MACR4B,QAAS,CACLC,OAAQ,mBACR,eAAgB,mBAChByG,cAAc,UAAD,OAAYH,MAG5BlI,MAAK,SAAAC,GACF,OAAOA,EAAS8B,UAEnB3B,OAAM,SAAAC,GAAG,OAAIH,QAAQC,IAAIE,OkBrE1BqM,CAAwBtE,EAAQF,GAAOlI,MAAK,SAAAgC,GACpCA,EAAKf,OACLf,QAAQC,IAAI6B,EAAKf,OACjBkF,EAAQ,eAAKnE,EAAN,CAAYf,MAAOe,EAAKf,WAE/Bf,QAAQC,IAAI6B,GACZmE,EAAQ,CAAEmG,YAAatK,EAAKsK,mBAKxClG,qBAAU,WACNqG,EAASrE,EAAQF,KAClB,IAEH,IAekBjH,EAMEC,EAXdyL,EAAW,WACb,OAAOnE,EAASoE,QAAO,SAACC,EAAcC,GAClC,OAAOD,EAAeC,EAAU5I,MAAQ4I,EAAU3H,QACnD,IAcD4H,EAAgB,SAAAzL,GAClB6E,EAAQ,eAAKnE,EAAN,CAAYwK,QAASlL,EAAMC,OAAOC,UAGzCwL,EAAkBhL,EAAKwK,QAErBS,EAAM,WACR9G,EAAQ,CAAE9D,SAAS,IAGJL,EAAKuK,SACfW,uBACAlN,MAAK,SAAAgC,GAGF,IAAMmL,EAAc,CAChBC,mBAFIpL,EAAKqL,MAGTC,OAAQX,MlBaE,SAACvE,EAAQF,EAAOiF,GAC1C,OAAOrN,MAAM,GAAD,OAAIpC,EAAJ,8BAA6B0K,GAAU,CAC/CrI,OAAQ,OACR4B,QAAS,CACLC,OAAQ,mBACR,eAAgB,mBAChByG,cAAc,UAAD,OAAYH,IAE7BrG,KAAM9D,KAAK+D,UAAUqL,KAEpBnN,MAAK,SAAAC,GACF,OAAOA,EAAS8B,UAEnB3B,OAAM,SAAAC,GAAG,OAAIH,QAAQC,IAAIE,OkBvBlBkN,CAAenF,EAAQF,EAAOiF,GACzBnN,MAAK,SAAAC,GACFC,QAAQC,IAAIF,GAEZ,IAAMuN,EAAkB,CACpBhF,SAAUA,EACViF,eAAgBxN,EAASyN,YAAY/I,GACrC2I,OAAQrN,EAASyN,YAAYJ,OAC7Bd,QAASQ,IlBkBV,SAAC5E,EAAQF,EAAOsF,GACvC,OAAO1N,MAAM,GAAD,OAAIpC,EAAJ,yBAAwB0K,GAAU,CAC1CrI,OAAQ,OACR4B,QAAS,CACLC,OAAQ,mBACR,eAAgB,mBAChByG,cAAc,UAAD,OAAYH,IAE7BrG,KAAM9D,KAAK+D,UAAU,CAAE6L,MAAOH,MAE7BxN,MAAK,SAAAC,GACF,OAAOA,EAAS8B,UAEnB3B,OAAM,SAAAC,GAAG,OAAIH,QAAQC,IAAIE,OkB5BVuN,CAAYxF,EAAQF,EAAOsF,GACtBxN,MAAK,SAAAC,GtBdT,IAAAL,IsBeiB,WACNgE,GAAQE,GACR5D,QAAQC,IAAI,yCACZgG,EAAQ,CACJ9D,SAAS,EACTnB,SAAS,KtBnBvB,qBAAXtD,SACPC,aAAagC,WAAW,QACxBD,QsBqBqBQ,OAAM,SAAAa,GACHf,QAAQC,IAAIc,GACZkF,EAAQ,CAAE9D,SAAS,UAG9BjC,OAAM,SAAAa,GACHf,QAAQC,IAAIc,GACZkF,EAAQ,CAAE9D,SAAS,UAG9BjC,OAAM,SAAAa,GAEHkF,EAAQ,eAAKnE,EAAN,CAAYf,MAAOA,EAAM4M,eAItCC,EAAa,kBACf,yBAAKC,OAAQ,kBAAM5H,EAAQ,eAAKnE,EAAN,CAAYf,MAAO,QACnB,OAArBe,EAAKsK,aAAwB9D,EAASjJ,OAAS,EAC5C,6BACI,yBAAKb,UAAU,mBACX,2BAAOA,UAAU,cAAjB,qBACA,8BACIwD,SAAU6K,EACVrO,UAAU,eACV8C,MAAOQ,EAAKwK,QACZxF,YAAY,wCAIpB,kBAAC,IAAD,CACIgH,QAAS,CACLC,cAAejM,EAAKsK,YACpB4B,OAAQ,CACJC,KAAM,UAGdC,WAAY,SAAA7B,GAAQ,OAAKvK,EAAKuK,SAAWA,KAE7C,4BAAQ5M,QAASsN,EAAKvO,UAAU,6BAC5B,oCAGR,OAMZ,OACI,6BACI,4CAAaiO,KACA3K,EAAKK,SALgB,wBAAI3D,UAAU,eAAd,eA/FtBwC,EAqGCc,EAAKd,QApGtB,yBAAKxC,UAAU,mBAAmBC,MAAO,CAAEsD,QAASf,EAAU,GAAK,SAAnE,0CAPcD,EA4GCe,EAAKf,MA3GpB,yBAAKvC,UAAU,qBAAqBC,MAAO,CAAEsD,QAAShB,EAAQ,GAAK,SAC9DA,IAhBEtD,IACH,6BAAMmQ,KAEF,kBAAC,IAAD,CAAMxO,GAAG,WACL,4BAAQZ,UAAU,mBAAlB,0BCkBL2P,EArDF,WAAO,IAAD,EACWxN,mBAAS,IADpB,mBACRyN,EADQ,KACDC,EADC,OAEO1N,oBAAS,GAFhB,mBAERiD,EAFQ,KAEHF,EAFG,KAIfwC,qBAAU,WACNmI,EvB2BkB,qBAAX3Q,QACHC,aAAaC,QAAQ,QACdC,KAAKC,MAAMH,aAAaC,QAAQ,SAGxC,MuB/BJ,CAACgG,IA4BJ,OACI,kBAAC,EAAD,CACIrD,MAAM,gBACNC,YAAY,oEACZhC,UAAU,mBAEV,yBAAKA,UAAU,OACX,yBAAKA,UAAU,sBAAsB4P,EAAM/O,OAAS,EAjC9C,SAAA+O,GACd,OACI,6BACI,uDAAsBA,EAAM/O,QAA5B,UACA,6BACC+O,EAAM7J,KAAI,SAAClB,EAASwB,GAAV,OACP,kBAAC,EAAD,CACIgC,IAAKhC,EACLxB,QAASA,EACTE,qBAAqB,EACrBC,YAAY,EACZC,yBAAyB,EACzBC,OAAQA,EACRE,IAAKA,QAoB2C0K,CAAUF,GAZ1E,mDACwB,6BADxB,IAC+B,kBAAC,IAAD,CAAMhP,GAAG,SAAT,uBAavB,yBAAKZ,UAAU,uBACX,wBAAIA,UAAU,QAAd,qBACA,6BACA,kBAAC,EAAD,CAAU8J,SAAU8F,EAAO1K,OAAQA,EAAQE,IAAKA,QCoHrD2K,EAlKA,WAAO,IAAD,EACW5N,mBAAS,IADpB,mBACV6N,EADU,KACFC,EADE,OAEuB9N,mBAAS,IAFhC,mBAEV+N,EAFU,KAEIC,EAFJ,OAIOlR,IAAhB6B,EAJS,EAITA,KAAM0I,EAJG,EAIHA,MAER4G,EAAa,YVmCG,SAAC1G,EAAQF,GAC/B,OAAOpI,MAAM,GAAD,OAAIpC,EAAJ,uBAAsB0K,GAAU,CACxCrI,OAAQ,MACR4B,QAAS,CACLC,OAAQ,mBACRyG,cAAc,UAAD,OAAYH,MAG5BlI,MAAK,SAAAC,GACF,OAAOA,EAAS8B,UAEnB3B,OAAM,SAAAC,GAAG,OAAIH,QAAQC,IAAIE,OU7C1B0O,CAAWvP,EAAK4D,IAAK8E,GAAOlI,MAAK,SAAAgC,GACzBA,EAAKf,MACLf,QAAQC,IAAI6B,EAAKf,OAEjB0N,EAAU3M,OAKhBgN,EAAmB,YVuCE,SAAC5G,EAAQF,GACpC,OAAOpI,MAAM,GAAD,OAAIpC,EAAJ,gCAA+B0K,GAAU,CACjDrI,OAAQ,MACR4B,QAAS,CACLC,OAAQ,mBACRyG,cAAc,UAAD,OAAYH,MAG5BlI,MAAK,SAAAC,GACF,OAAOA,EAAS8B,UAEnB3B,OAAM,SAAAC,GAAG,OAAIH,QAAQC,IAAIE,OUjD1B4O,CAAgBzP,EAAK4D,IAAK8E,GAAOlI,MAAK,SAAAgC,GAC9BA,EAAKf,MACLf,QAAQC,IAAI6B,EAAKf,OAEjB4N,EAAgB7M,OAK5BoE,qBAAU,WACN0I,IACAE,MACD,IAEH,IAYME,EAAY,SAACnI,EAAKvF,GAAN,OACd,yBAAK9C,UAAU,4BACX,yBAAKA,UAAU,uBACX,yBAAKA,UAAU,oBAAoBqI,IAEvC,2BACI5E,KAAK,OACLX,MAAOA,EACP9C,UAAU,eACVyQ,UAAQ,MAKdC,EAAqB,SAACzI,EAAG0I,IVYF,SAACjH,EAAQF,EAAOmH,EAASC,GACtD,OAAOxP,MAAM,GAAD,OAAIpC,EAAJ,kBAAiB2R,EAAjB,mBAAmCjH,GAAU,CACrDrI,OAAQ,MACR4B,QAAS,CACLC,OAAQ,mBACR,eAAgB,mBAChByG,cAAc,UAAD,OAAYH,IAE7BrG,KAAM9D,KAAK+D,UAAU,CAAEwN,SAAQD,cAE9BrP,MAAK,SAAAC,GACF,OAAOA,EAAS8B,UAEnB3B,OAAM,SAAAC,GAAG,OAAIH,QAAQC,IAAIE,OUxB1BkP,CAAkB/P,EAAK4D,IAAK8E,EAAOmH,EAAS1I,EAAEpF,OAAOC,OAAOxB,MACxD,SAAAgC,GACQA,EAAKf,MACLf,QAAQC,IAAI,wBAEZ2O,QAuBhB,OACI,kBAAC,EAAD,CACIrO,MAAM,SACNC,YAAW,gBACPlB,EAAKsB,KADE,wCAGXpC,UAAU,mBAEV,yBAAKA,UAAU,OACX,yBAAKA,UAAU,wBA/DnBgQ,EAAOnP,OAAS,EAEZ,wBAAIb,UAAU,yBAAd,iBACmBgQ,EAAOnP,QAIvB,wBAAIb,UAAU,eAAd,aA2DEgQ,EAAOjK,KAAI,SAAC+K,EAAGC,GACZ,OACI,yBACI/Q,UAAU,OACVqI,IAAK0I,EACL9Q,MAAO,CAAES,aAAc,qBAEvB,wBAAIV,UAAU,QACV,0BAAMA,UAAU,2CAAhB,aACe8Q,EAAEpM,MAIrB,wBAAI1E,UAAU,mBACV,wBAAIA,UAAU,mBA3C3B,SAAA8Q,GAAC,OAChB,yBAAK9Q,UAAU,cACX,wBAAIA,UAAU,aAAd,WAAmC8Q,EAAEF,QACrC,4BACI5Q,UAAU,eACVwD,SAAU,SAAAyE,GAAC,OAAIyI,EAAmBzI,EAAG6I,EAAEpM,OAEvC,iDACCwL,EAAanK,KAAI,SAAC6K,EAAQI,GAAT,OACd,4BAAQ3I,IAAK2I,EAAOlO,MAAO8N,GACtBA,QAkCgBK,CAAWH,IAEhB,wBAAI9Q,UAAU,mBAAd,mBACqB8Q,EAAE/B,gBAEvB,wBAAI/O,UAAU,mBAAd,iBACc8Q,EAAElC,QAEhB,wBAAI5O,UAAU,mBAAd,eACiB8Q,EAAEhQ,KAAKsB,MAExB,wBAAIpC,UAAU,mBAAd,cACgB,IACX2G,IAAOmK,EAAElK,WAAWC,WAEzB,wBAAI7G,UAAU,mBAAd,qBACuB8Q,EAAEhD,UAI7B,wBAAI9N,UAAU,yBAAd,+BACiC,IAC5B8Q,EAAEhH,SAASjJ,QAGfiQ,EAAEhH,SAAS/D,KAAI,SAACC,EAAGkL,GAAJ,OACZ,yBACIlR,UAAU,OACVqI,IAAK6I,EACLjR,MAAO,CACHkR,QAAS,OACT5I,OAAQ,qBAGXiI,EAAU,eAAgBxK,EAAE5D,MAC5BoO,EAAU,gBAAiBxK,EAAES,OAC7B+J,EAAU,gBAAiBxK,EAAER,OAC7BgL,EAAU,aAAcxK,EAAEtB,iBCjEpD0M,EAtFC,SAAC,GAAe,IAAb1D,EAAY,EAAZA,MAAY,EACCvL,mBAAS,CACjCC,KAAM,GACNC,MAAO,GACPC,SAAU,GACVC,OAAO,EACPC,SAAS,IANc,mBACpBC,EADoB,KACZC,EADY,KASnB8G,EAAUvK,IAAVuK,MACApH,EAA0CK,EAA1CL,KAAMC,EAAoCI,EAApCJ,MAAOC,EAA6BG,EAA7BH,SAAiBE,GAAYC,EAAnBF,MAAmBE,EAAZD,SAEhCiH,EAAO,SAACC,IdhBE,SAACA,EAAQF,GACzB,OAAOpI,MAAM,GAAD,OAAIpC,EAAJ,iBAAgB0K,GAAU,CAClCrI,OAAQ,MACR4B,QAAS,CACLC,OAAQ,mBACR,eAAgB,mBAChByG,cAAc,UAAD,OAAYH,MAG5BlI,MAAK,SAAAC,GACF,OAAOA,EAAS8B,UAEnB3B,OAAM,SAAAC,GAAG,OAAIH,QAAQC,IAAIE,OcM1B6L,CAAK9D,EAAQF,GAAOlI,MAAK,SAAAgC,GACjBA,EAAKf,MACLG,EAAU,eAAKD,EAAN,CAAcF,OAAO,KAE9BG,EAAU,eAAKD,EAAN,CAAcL,KAAMkB,EAAKlB,KAAMC,MAAOiB,EAAKjB,aAKhEqF,qBAAU,WACN+B,EAAKiE,EAAM9F,OAAO8B,UACnB,IAEH,IAAM/G,EAAe,SAAAP,GAAI,OAAI,SAAA6F,GACzBvF,EAAU,eAAKD,EAAN,aAAcF,OAAO,GAAQH,EAAO6F,EAAEpF,OAAOC,WAGpDC,EAAc,SAAAkF,GAChBA,EAAEjF,iBdrBY,SAAC0G,EAAQF,EAAO1I,GAClC,OAAOM,MAAM,GAAD,OAAIpC,EAAJ,iBAAgB0K,GAAU,CAClCrI,OAAQ,MACR4B,QAAS,CACLC,OAAQ,mBACR,eAAgB,mBAChByG,cAAc,UAAD,OAAYH,IAE7BrG,KAAM9D,KAAK+D,UAAUtC,KAEpBQ,MAAK,SAAAC,GACF,OAAOA,EAAS8B,UAEnB3B,OAAM,SAAAC,GAAG,OAAIH,QAAQC,IAAIE,McS1B0P,CAAO3D,EAAM9F,OAAO8B,OAAQF,EAAO,CAAEpH,OAAMC,QAAOC,aAAYhB,MAAK,SAAAgC,GAC3DA,EAAKf,MAEL+O,MAAMhO,EAAKf,OdTD,SAACzB,EAAMI,GAC7B,GAAsB,qBAAXhC,QACHC,aAAaC,QAAQ,OAAQ,CAC7B,IAAImS,EAAOlS,KAAKC,MAAMH,aAAaC,QAAQ,QAC3CmS,EAAKzQ,KAAOA,EACZ3B,aAAa2E,QAAQ,MAAOzE,KAAK+D,UAAUmO,IAC3CrQ,KcKIsQ,CAAWlO,GAAM,WACbZ,EAAU,eACHD,EADE,CAELL,KAAMkB,EAAKlB,KACXC,MAAOiB,EAAKjB,MACZG,SAAS,YAkC7B,OACI,kBAAC,EAAD,CAAQT,MAAM,UAAUC,YAAY,sBAAsBhC,UAAU,mBAtBlD,SAACoC,EAAMC,EAAOC,GAAd,OAClB,0BAAMtC,UAAU,gDACZ,yBAAKA,UAAU,mBACX,2BAAOA,UAAU,cAAjB,QACA,2BAAOyD,KAAK,OAAOD,SAAUb,EAAa,QAAS3C,UAAU,eAAe8C,MAAOV,KAEvF,yBAAKpC,UAAU,mBACX,2BAAOA,UAAU,cAAjB,SACA,2BAAOyD,KAAK,QAAQD,SAAUb,EAAa,SAAU3C,UAAU,eAAe8C,MAAOT,KAEzF,yBAAKrC,UAAU,mBACX,2BAAOA,UAAU,cAAjB,YACA,2BAAOyD,KAAK,WAAWD,SAAUb,EAAa,YAAa3C,UAAU,eAAe8C,MAAOR,KAG/F,4BAAQrB,QAAS8B,EAAa/C,UAAU,wBAAxC,WASCyR,CAAcrP,EAAMC,EAAOC,GA9Bf,SAAAE,GACjB,GAAIA,EACA,OAAO,kBAAC,IAAD,CAAU5B,GAAG,UA6BnB8Q,CAAalP,KCVXmP,EAvEQ,WAAO,IAAD,EACOxP,mBAAS,IADhB,mBAClB2H,EADkB,KACR8H,EADQ,OAGD3S,IAAhB6B,EAHiB,EAGjBA,KAAM0I,EAHW,EAGXA,MAERqI,EAAe,WZ0FdzQ,MAAM,GAAD,OAAIpC,EAAJ,6BAAoC,CAC5CqC,OAAQ,QAEPC,MAAK,SAAAC,GACF,OAAOA,EAAS8B,UAEnB3B,OAAM,SAAAC,GAAG,OAAIH,QAAQC,IAAIE,MY/FZL,MAAK,SAAAgC,GACXA,EAAKf,MACLf,QAAQC,IAAI6B,EAAKf,OAEjBqP,EAAYtO,OAKlBwO,EAAU,SAAA1L,IZyFS,SAACA,EAAWsD,EAAQF,GAC7C,OAAOpI,MAAM,GAAD,OAAIpC,EAAJ,oBAAmBoH,EAAnB,YAAgCsD,GAAU,CAClDrI,OAAQ,SACR4B,QAAS,CACLC,OAAQ,mBACR,eAAgB,mBAChByG,cAAc,UAAD,OAAYH,MAG5BlI,MAAK,SAAAC,GACF,OAAOA,EAAS8B,UAEnB3B,OAAM,SAAAC,GAAG,OAAIH,QAAQC,IAAIE,OYpG1BoQ,CAAc3L,EAAWtF,EAAK4D,IAAK8E,GAAOlI,MAAK,SAAAgC,GACvCA,EAAKf,MACLf,QAAQC,IAAI6B,EAAKf,OAEjBsP,QASZ,OAJAnK,qBAAU,WACNmK,MACD,IAGC,kBAAC,EAAD,CACI9P,MAAM,kBACNC,YAAY,2BACZhC,UAAU,mBAEV,yBAAKA,UAAU,qCACX,yBAAKA,UAAU,SACX,wBAAIA,UAAU,eAAd,SACW8J,EAASjJ,OADpB,aAGA,6BACA,wBAAIb,UAAU,cACT8J,EAAS/D,KAAI,SAACC,EAAGK,GAAJ,OACV,wBACIgC,IAAKhC,EACLrG,UAAU,qEAEV,gCAASgG,EAAE5D,MACX,6BACI,kBAAC,IAAD,CAAMxB,GAAE,gCAA2BoF,EAAEtB,MACjC,0BAAM1E,UAAU,0CAAhB,WAIJ,0BACIiB,QAAS,kBAAM6Q,EAAQ9L,EAAEtB,MACzB1E,UAAU,yCAFd,gBAUhB,iCCsILgS,EAtMO,SAAC,GAAe,IAAbtE,EAAY,EAAZA,MAAY,EACLvL,mBAAS,CACjCC,KAAM,GACNJ,YAAa,GACbyE,MAAO,GACPY,WAAY,GACZX,SAAU,GACViE,SAAU,GACV7D,SAAU,GACV8D,MAAO,GACPjH,SAAS,EACTpB,OAAO,EACPsI,eAAgB,GAChBC,mBAAmB,EACnBC,SAAU,KAdmB,mBAC1BtI,EAD0B,KAClBC,EADkB,OAgBGP,mBAAS,IAhBZ,mBAgB1BkF,EAhB0B,KAgBd+E,EAhBc,OAkBTnN,IAAhB6B,EAlByB,EAkBzBA,KAAM0I,EAlBmB,EAkBnBA,MAEVpH,EAYAK,EAZAL,KACAJ,EAWAS,EAXAT,YACAyE,EAUAhE,EAVAgE,MAIAK,GAMArE,EARAiE,SAQAjE,EAPAkI,SAOAlI,EANAqE,UACAnD,EAKAlB,EALAkB,QACApB,EAIAE,EAJAF,MACAsI,EAGApI,EAHAoI,eACAC,EAEArI,EAFAqI,kBACAC,EACAtI,EADAsI,SAGEtB,EAAO,SAAArD,IbqFS,SAAAA,GACtB,OAAOhF,MAAM,GAAD,OAAIpC,EAAJ,oBAAmBoH,GAAa,CACxC/E,OAAQ,QAEPC,MAAK,SAAAC,GACF,OAAOA,EAAS8B,UAEnB3B,OAAM,SAAAC,GAAG,OAAIH,QAAQC,IAAIE,Oa3F1BsQ,CAAW7L,GAAW9E,MAAK,SAAAgC,GACnBA,EAAKf,MACLG,EAAU,eAAKD,EAAN,CAAcF,MAAOe,EAAKf,UAGnCG,EAAU,eACHD,EADE,CAELL,KAAMkB,EAAKlB,KACXJ,YAAasB,EAAKtB,YAClByE,MAAOnD,EAAKmD,MACZC,SAAUpD,EAAKoD,SAAShC,IACxBiG,SAAUrH,EAAKqH,SACf7D,SAAUxD,EAAKwD,SACfiE,SAAU,IAAIC,YAGlBkH,SAMNA,EAAiB,WACnBhO,IAAgB5C,MAAK,SAAAgC,GACbA,EAAKf,MACLG,EAAU,eAAKD,EAAN,CAAcF,MAAOe,EAAKf,SAEnC6J,EAAc9I,OAK1BoE,qBAAU,WACN+B,EAAKiE,EAAM9F,OAAOxB,aACnB,IAEH,IAAMzD,EAAe,SAAAP,GAAI,OAAI,SAAAQ,GACzB,IAAME,EAAiB,UAATV,EAAmBQ,EAAMC,OAAOoI,MAAM,GAAKrI,EAAMC,OAAOC,MACtEiI,EAASG,IAAI9I,EAAMU,GACnBJ,EAAU,eAAKD,EAAN,eAAeL,EAAOU,OAG7BC,EAAc,SAAAH,GAChBA,EAAMI,iBACNN,EAAU,eAAKD,EAAN,CAAcF,MAAO,GAAIoB,SAAS,KbkDtB,SAACyC,EAAWsD,EAAQF,EAAO3E,GACpD,OAAOzD,MAAM,GAAD,OAAIpC,EAAJ,oBAAmBoH,EAAnB,YAAgCsD,GAAU,CAClDrI,OAAQ,MACR4B,QAAS,CACLC,OAAQ,mBACRyG,cAAc,UAAD,OAAYH,IAE7BrG,KAAM0B,IAELvD,MAAK,SAAAC,GACF,OAAOA,EAAS8B,UAEnB3B,OAAM,SAAAC,GAAG,OAAIH,QAAQC,IAAIE,Ma5D1BwQ,CAAczE,EAAM9F,OAAOxB,UAAWtF,EAAK4D,IAAK8E,EAAOuB,GAAUzJ,MAAK,SAAAgC,GAC9DA,EAAKf,MACLG,EAAU,eAAKD,EAAN,CAAcF,MAAOe,EAAKf,SAEnCG,EAAU,eACHD,EADE,CAELL,KAAM,GACNJ,YAAa,GACb4I,MAAO,GACPnE,MAAO,GACPK,SAAU,GACVnD,SAAS,EACTpB,OAAO,EACPuI,mBAAmB,EACnBD,eAAgBvH,EAAKlB,YAwFrC,OACI,kBAAC,EAAD,CAAQL,MAAM,oBAAoBC,YAAW,gBAAWlB,EAAKsB,KAAhB,kCACzC,yBAAKpC,UAAU,OACX,yBAAKA,UAAU,wBAjBvB2D,GACI,yBAAK3D,UAAU,uBACX,2CARR,yBAAKA,UAAU,mBAAmBC,MAAO,CAAEsD,QAASsH,EAAiB,GAAK,SACtE,sCAAQA,GAAR,iBAPJ,yBAAK7K,UAAU,qBAAqBC,MAAO,CAAEsD,QAAShB,EAAQ,GAAK,SAC9DA,GAxDL,0BAAMvC,UAAU,OAAOmI,SAAUpF,GAC7B,0CACA,yBAAK/C,UAAU,cACX,2BAAOA,UAAU,qBACb,2BAAOwD,SAAUb,EAAa,SAAUc,KAAK,OAAOrB,KAAK,QAAQgJ,OAAO,cAIhF,yBAAKpL,UAAU,cACX,2BAAOA,UAAU,cAAjB,QACA,2BAAOwD,SAAUb,EAAa,QAASc,KAAK,OAAOzD,UAAU,eAAe8C,MAAOV,KAGvF,yBAAKpC,UAAU,cACX,2BAAOA,UAAU,cAAjB,eACA,8BAAUwD,SAAUb,EAAa,eAAgB3C,UAAU,eAAe8C,MAAOd,KAGrF,yBAAKhC,UAAU,cACX,2BAAOA,UAAU,cAAjB,SACA,2BAAOwD,SAAUb,EAAa,SAAUc,KAAK,SAASzD,UAAU,eAAe8C,MAAO2D,KAG1F,yBAAKzG,UAAU,cACX,2BAAOA,UAAU,cAAjB,YACA,4BAAQwD,SAAUb,EAAa,YAAa3C,UAAU,gBAClD,iDACCqH,GACGA,EAAWtB,KAAI,SAACqC,EAAG/B,GAAJ,OACX,4BAAQgC,IAAKhC,EAAGvD,MAAOsF,EAAE1D,KACpB0D,EAAEhG,WAMvB,yBAAKpC,UAAU,cACX,2BAAOA,UAAU,cAAjB,YACA,4BAAQwD,SAAUb,EAAa,YAAa3C,UAAU,gBAClD,iDACA,4BAAQ8C,MAAM,KAAd,MACA,4BAAQA,MAAM,KAAd,SAIR,yBAAK9C,UAAU,cACX,2BAAOA,UAAU,cAAjB,YACA,2BAAOwD,SAAUb,EAAa,YAAac,KAAK,SAASzD,UAAU,eAAe8C,MAAOgE,KAG7F,4BAAQ9G,UAAU,2BAAlB,mBAuBa,WACjB,GAAI8K,IACKvI,EACD,OAAO,kBAAC,IAAD,CAAU3B,GAAG,MAaf8Q,OCzJNU,EAxBA,WACX,OACI,kBAAC,IAAD,KACI,kBAAC,IAAD,KACI,kBAAC,IAAD,CAAO3S,KAAK,IAAI4S,OAAK,EAACpJ,UAAWR,IACjC,kBAAC,IAAD,CAAOhJ,KAAK,UAAU4S,OAAK,EAACpJ,UAAWvF,IACvC,kBAAC,IAAD,CAAOjE,KAAK,UAAU4S,OAAK,EAACpJ,UAAW/G,IACvC,kBAAC,IAAD,CAAOzC,KAAK,QAAQ4S,OAAK,EAACpJ,UAAWgD,IACrC,kBAAC,EAAD,CAAcxM,KAAK,kBAAkB4S,OAAK,EAACpJ,UAAWK,IACtD,kBAAC,EAAD,CAAY7J,KAAK,mBAAmB4S,OAAK,EAACpJ,UAAWgB,IACrD,kBAAC,EAAD,CAAYxK,KAAK,mBAAmB4S,OAAK,EAACpJ,UAAWiB,IACrD,kBAAC,EAAD,CAAYzK,KAAK,kBAAkB4S,OAAK,EAACpJ,UAAWyB,IACpD,kBAAC,IAAD,CAAOjL,KAAK,sBAAsB4S,OAAK,EAACpJ,UAAWkE,IACnD,kBAAC,IAAD,CAAO1N,KAAK,QAAQ4S,OAAK,EAACpJ,UAAW0G,IACrC,kBAAC,EAAD,CAAYlQ,KAAK,gBAAgB4S,OAAK,EAACpJ,UAAW8G,IAClD,kBAAC,EAAD,CAActQ,KAAK,mBAAmB4S,OAAK,EAACpJ,UAAWmI,IACvD,kBAAC,EAAD,CAAc3R,KAAK,kBAAkB4S,OAAK,EAACpJ,UAAW0I,IACtD,kBAAC,EAAD,CAAYlS,KAAK,mCAAmC4S,OAAK,EAACpJ,UAAW+I,OCjCrFM,IAASnJ,OAAO,kBAAC,EAAD,MAAWoJ,SAASC,eAAe,W","file":"static/js/main.0b4f0afa.chunk.js","sourcesContent":["export const API = '/api'\r\n\r\n// export const API = process.env.REACT_APP_API_URL;","import { API } from '../config'\r\n\r\nexport const signup = user => {\r\n    return fetch(`${API}/signup`, {\r\n        method: \"POST\",\r\n        headers: {\r\n            Accept: 'application.json',\r\n            \"Content-Type\": \"application/json\"\r\n        },\r\n        body: JSON.stringify(user)\r\n    })\r\n        .then(response => {\r\n            return response.json()\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n        })\r\n}\r\n\r\nexport const signin = user => {\r\n    return fetch(`${API}/signin`, {\r\n        method: \"POST\",\r\n        headers: {\r\n            Accept: 'application.json',\r\n            \"Content-Type\": \"application/json\"\r\n        },\r\n        body: JSON.stringify(user)\r\n    })\r\n        .then(response => {\r\n            return response.json()\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n        })\r\n}\r\n\r\nexport const authenticate = (data, next) => {\r\n    if(typeof window !== 'undefined'){\r\n        localStorage.setItem('jwt', JSON.stringify(data))\r\n        next();\r\n    }\r\n}\r\n\r\nexport const signout = (next) => {\r\n    if(typeof window !== 'undefined'){\r\n        localStorage.removeItem('jwt',)\r\n        next();\r\n        return fetch(`${API}/signout`, {\r\n            method: \"GET\"\r\n        })\r\n        .then(response => {\r\n            console.log('singout', response)\r\n        })\r\n        .catch(err=> console.log(err));\r\n    }\r\n};\r\n\r\nexport const isAuthenticated = () =>{\r\n    if(typeof window == 'undefined'){\r\n        return false;\r\n    }\r\n    if(localStorage.getItem('jwt')){\r\n        return JSON.parse(localStorage.getItem('jwt'))\r\n    }else{\r\n        return false;\r\n    }\r\n}","import React, { Fragment } from 'react'\r\nimport { Link, withRouter } from 'react-router-dom'\r\nimport { signout, isAuthenticated } from '../auth/index'\r\nimport { itemTotal } from \"./cartHelpers\";\r\n\r\nconst isActive = (history, path) => {\r\n    if (history.location.pathname === path) {\r\n        return { backgroundColor: '#ffffff', color: '#343A40', borderRadius: '10px' }\r\n    }\r\n    else {\r\n        return { color: '#ffffff', borderRadius: '10px' }\r\n    }\r\n}\r\n\r\nconst Menu = ({ history }) => (\r\n    <div>\r\n        <nav className=\"navbar navbar-expand-sm bg-dark navbar-dark d-flex justify-content-around\" style={{flexDirection: \"row\"}}>\r\n            <a className=\"navbar-brand\" href=\"/\" style={{fontFamily: 'monospace', fontWeight: 'bold', fontSize: 30}}>\r\n                <img src=\"https://i.imgur.com/Is2E9Zk.png\" alt=\"Guten Shop\" width=\"200\"/>\r\n            </a>\r\n            <ul className=\"nav nav-tabs d-flex justify-content-around\" style={{borderBottom: 0, marginLeft: 'auto', fontSize: 20}} >\r\n                <li className=\"nav-item\">\r\n                    <Link className=\"nav-link\" style={isActive(history, '/')} to=\"/\">Home</Link>\r\n                </li>\r\n\r\n                <li className=\"nav-item\">\r\n                    <Link className=\"nav-link\" style={isActive(history, '/shop')} to=\"/shop\">Shop</Link>\r\n                </li>\r\n                \r\n                <li className=\"nav-item\">\r\n                <Link\r\n                    className=\"nav-link\"\r\n                    style={isActive(history, \"/cart\")}\r\n                    to=\"/cart\"\r\n                >\r\n                    Cart{\" \"}\r\n                    <sup>\r\n                        <small className=\"cart-badge\">{itemTotal()}</small>\r\n                    </sup>\r\n                </Link>\r\n                </li>\r\n\r\n                {isAuthenticated() && isAuthenticated().user.role === 0 && (\r\n                    <li className=\"nav-item\">\r\n                        <Link className=\"nav-link\" style={isActive(history, '/user/dashboard')} to=\"/user/dashboard\">Dashboard</Link>\r\n                    </li>\r\n                )}\r\n\r\n                {isAuthenticated() && isAuthenticated().user.role === 1 && (\r\n                    <li className=\"nav-item\">\r\n                        <Link className=\"nav-link\" style={isActive(history, '/admin/dashboard')} to=\"/admin/dashboard\">Admin Dashboard</Link>\r\n                    </li>\r\n                )}\r\n\r\n                {!isAuthenticated() && (\r\n                    <Fragment>\r\n                        <li className=\"nav-item\">\r\n                            <Link className=\"nav-link\" style={isActive(history, '/signin')} to=\"/signin\">SignIn</Link>\r\n                        </li>\r\n                        <li className=\"nav-item\">\r\n                            <Link className=\"nav-link\" style={isActive(history, '/signup')} to=\"/signup\">SignUp</Link>\r\n                        </li>\r\n                    </Fragment>\r\n                )}\r\n                {isAuthenticated() && (\r\n                    <li className=\"nav-item\">\r\n                        <span className=\"nav-link\" style={{ cursor: 'pointer', color: '#ffffff', borderRadius: '10px' }} onClick={() => signout(() => {\r\n                            history.push('/')\r\n                        })}>Sign Out</span>\r\n                    </li>\r\n                )}\r\n            </ul>\r\n        </nav>\r\n    </div>\r\n)\r\n\r\nexport default withRouter(Menu);","export const addItem = (item = [], count = 0, next = f => f) => {\r\n    let cart = [];\r\n    if (typeof window !== 'undefined') {\r\n        if (localStorage.getItem('cart')) {\r\n            cart = JSON.parse(localStorage.getItem('cart'));\r\n        }\r\n        cart.push({\r\n            ...item,\r\n            count: 1\r\n        });\r\n\r\n        // remove duplicates\r\n        // build an Array from new Set and turn it back into array using Array.from\r\n        // so that later we can re-map it\r\n        // new set will only allow unique values in it\r\n        // so pass the ids of each object/product\r\n        // If the loop tries to add the same value again, it'll get ignored\r\n        // ...with the array of ids we got on when first map() was used\r\n        // run map() on it again and return the actual product from the cart\r\n\r\n        cart = Array.from(new Set(cart.map(p => p._id))).map(id => {\r\n            return cart.find(p => p._id === id);\r\n        });\r\n\r\n        localStorage.setItem('cart', JSON.stringify(cart));\r\n        next();\r\n    }\r\n};\r\n\r\nexport const itemTotal = () => {\r\n    if (typeof window !== 'undefined') {\r\n        if (localStorage.getItem('cart')) {\r\n            return JSON.parse(localStorage.getItem('cart')).length;\r\n        }\r\n    }\r\n    return 0;\r\n};\r\n\r\nexport const getCart = () => {\r\n    if (typeof window !== 'undefined') {\r\n        if (localStorage.getItem('cart')) {\r\n            return JSON.parse(localStorage.getItem('cart'));\r\n        }\r\n    }\r\n    return [];\r\n};\r\n\r\nexport const updateItem = (productId, count) => {\r\n    let cart = [];\r\n    if (typeof window !== 'undefined') {\r\n        if (localStorage.getItem('cart')) {\r\n            cart = JSON.parse(localStorage.getItem('cart'));\r\n        }\r\n\r\n        cart.map((product, i) => {\r\n            if (product._id === productId) {\r\n                cart[i].count = count;\r\n            }\r\n        });\r\n\r\n        localStorage.setItem('cart', JSON.stringify(cart));\r\n    }\r\n};\r\n\r\nexport const removeItem = productId => {\r\n    let cart = [];\r\n    if (typeof window !== 'undefined') {\r\n        if (localStorage.getItem('cart')) {\r\n            cart = JSON.parse(localStorage.getItem('cart'));\r\n        }\r\n\r\n        cart.map((product, i) => {\r\n            if (product._id === productId) {\r\n                cart.splice(i, 1);\r\n            }\r\n        });\r\n\r\n        localStorage.setItem('cart', JSON.stringify(cart));\r\n    }\r\n    return cart;\r\n};\r\n\r\nexport const emptyCart = next => {\r\n    if (typeof window !== 'undefined') {\r\n        localStorage.removeItem('cart');\r\n        next();\r\n    }\r\n};\r\n","import React from 'react'\r\nimport Menu from './Menu'\r\n\r\nconst Layout = ({ title = 'Title', description = 'Description', className, children }) => (\r\n    <div>\r\n        <Menu />\r\n        <div className=\"jumbotron\">\r\n            <h2>{title}</h2>\r\n            <p className=\"lead\">{description}</p>\r\n        </div>\r\n        <div className={className}>{children}</div>\r\n    </div>\r\n)\r\n\r\nexport default Layout;","import React, { useState } from 'react'\r\nimport Layout from '../core/Layout'\r\nimport { Link } from 'react-router-dom'\r\nimport {signup} from '../auth/index'\r\n\r\nconst Signup = () => {\r\n    const [values, setValues] = useState({\r\n        name: '',\r\n        email: '',\r\n        password: '',\r\n        error: '',\r\n        success: false,\r\n\r\n    });\r\n\r\n    const { name, email, password, success, error } = values\r\n\r\n    const handleChange = name => event => {\r\n        setValues({ ...values, error: false, [name]: event.target.value })\r\n    };\r\n\r\n    const clickSubmit = (event) => {\r\n        event.preventDefault()\r\n        setValues({ ...values, error: false })\r\n        signup({ name, email, password })\r\n            .then(data => {\r\n                if (data.error) {\r\n                    setValues({ ...values, error: data.error, success: false })\r\n                } else {\r\n                    setValues({\r\n                        ...values,\r\n                        name: '',\r\n                        email: '',\r\n                        password: '',\r\n                        error: '',\r\n                        success: true\r\n                    })\r\n                }\r\n            })\r\n    };\r\n\r\n    const signUpForm = () => (\r\n        <form>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Name</label>\r\n                <input onChange={handleChange('name')} type=\"text\" className=\"form-control\" value={name} />\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Email</label>\r\n                <input onChange={handleChange('email')} type=\"email\" className=\"form-control\" value={email} />\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Password</label>\r\n                <input onChange={handleChange('password')} type=\"password\" className=\"form-control\" value={password} />\r\n            </div>\r\n            <button onClick={clickSubmit} className=\"btn btn-primary\">Submit</button>\r\n        </form>\r\n    )\r\n\r\n    const showError = () => (\r\n        <div\r\n            className=\"alert alert-danger\"\r\n            style={{ display: error ? '' : 'none' }}>\r\n            {error}\r\n        </div>\r\n    )\r\n\r\n    const showSuccess = () => (\r\n        <div\r\n            className=\"alert alert-info\"\r\n            style={{ display: success ? '' : 'none' }}>\r\n            New account is created, Please <Link to=\"/signin\">Signin</Link>\r\n        </div>\r\n    )\r\n\r\n    return (\r\n        <Layout\r\n            title=\"Sign up\"\r\n            description=\"Signup to Gutten Shop\"\r\n            className=\"container col-md-6 offset-md-3\"\r\n        >\r\n            {showSuccess()}\r\n            {showError()}\r\n            {signUpForm()}\r\n        </Layout>\r\n    );\r\n};\r\n\r\nexport default Signup;","import React, { useState } from 'react'\r\nimport Layout from '../core/Layout'\r\nimport { Redirect } from 'react-router-dom'\r\nimport {signin, authenticate, isAuthenticated} from '../auth/index'\r\n\r\nconst Signin = () => {\r\n    const [values, setValues] = useState({\r\n        email: '',\r\n        password: '',\r\n        error: '',\r\n        loading: false,\r\n        redirectToReferrer: false,\r\n\r\n    });\r\n\r\n    const { email, password, loading, error, redirectToReferrer } = values\r\n    const {user} = isAuthenticated()\r\n\r\n    const handleChange = name => event => {\r\n        setValues({ ...values, error: false, [name]: event.target.value })\r\n    };\r\n\r\n    const clickSubmit = event => {\r\n        event.preventDefault()\r\n        setValues({ ...values, error: false, loading: true })\r\n        signin({ email, password })\r\n            .then(data => {\r\n                if (data.error) {\r\n                    setValues({ ...values, error: data.error, loading: false })\r\n                } else {\r\n                    authenticate(data, () =>{\r\n                        setValues({\r\n                            ...values,\r\n                            redirectToReferrer: true\r\n                        })\r\n                    })\r\n                }\r\n            })\r\n    };\r\n\r\n    const signUpForm = () => (\r\n        <form>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Email</label>\r\n                <input onChange={handleChange('email')} type=\"email\" className=\"form-control\" value={email} />\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Password</label>\r\n                <input onChange={handleChange('password')} type=\"password\" className=\"form-control\" value={password} />\r\n            </div>\r\n            <button onClick={clickSubmit} className=\"btn btn-primary\">Submit</button>\r\n        </form>\r\n    )\r\n\r\n    const showError = () => (\r\n        <div\r\n            className=\"alert alert-danger\"\r\n            style={{ display: error ? '' : 'none' }}>\r\n            {error}\r\n        </div>\r\n    )\r\n\r\n    const showLoading = () => (\r\n        loading && (<div className=\"alert alert-info\">\r\n            <h2>Loading...</h2>\r\n        </div>)\r\n    )\r\n    const redirectUser = () => {\r\n        if(redirectToReferrer){\r\n           if(user && user.role === 1) {\r\n                return <Redirect to=\"/admin/dashboard\" />\r\n           }else{\r\n                return <Redirect to=\"/user/dashboard\" />\r\n           }\r\n        }\r\n        if(isAuthenticated()){\r\n            return <Redirect to=\"/user/dashboard\" />\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Layout\r\n            title=\"Sign In\"\r\n            description=\"SignIn to Gutten Shop\"\r\n            className=\"container col-md-6 offset-md-3\"\r\n        >\r\n            {showLoading()}\r\n            {showError()}\r\n            {signUpForm()}\r\n            {redirectUser()}\r\n        </Layout>\r\n    );\r\n};\r\n\r\nexport default Signin;","import { API } from '../config'\r\nimport queryString from \"query-string\";\r\n\r\nexport const getProducts = (sortBy) => {\r\n    return fetch(`${API}/products?sortBy=${sortBy}&order=desc&limi=6`, {\r\n        method: \"GET\"\r\n    })\r\n    .then(response => {\r\n        return response.json()\r\n    })\r\n    .catch(err => console.log(err))\r\n\r\n}\r\n\r\nexport const getCategories = () => {\r\n    return fetch(`${API}/categories`, {\r\n        method: \"GET\"\r\n    })\r\n    .then(response => {\r\n        return response.json()\r\n    })\r\n    .catch(err => console.log(err))\r\n\r\n}\r\n\r\nexport const getFilteredProducts = (skip, limit, filters = {}) => {\r\n    const data = {\r\n        limit,\r\n        skip,\r\n        filters\r\n    };\r\n    return fetch(`${API}/products/by/search`, {\r\n        method: \"POST\",\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\"\r\n        },\r\n        body: JSON.stringify(data)\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n        });\r\n};\r\n\r\nexport const list = params => {\r\n    const query = queryString.stringify(params);\r\n    console.log(\"query\", query);\r\n    return fetch(`${API}/products/search?${query}`, {\r\n        method: \"GET\"\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n\r\nexport const read = productId => {\r\n    return fetch(`${API}/product/${productId}`, {\r\n        method: \"GET\"\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n\r\nexport const listRelated = productId => {\r\n    return fetch(`${API}/products/related/${productId}`, {\r\n        method: \"GET\"\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n\r\nexport const getBraintreeClientToken = (userId, token) => {\r\n    return fetch(`${API}/braintree/getToken/${userId}`, {\r\n        method: \"GET\",\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${token}`\r\n        }\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n\r\nexport const processPayment = (userId, token, paymentData) => {\r\n    return fetch(`${API}/braintree/payment/${userId}`, {\r\n        method: \"POST\",\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify(paymentData)\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n\r\nexport const createOrder = (userId, token, createOrderData) => {\r\n    return fetch(`${API}/order/create/${userId}`, {\r\n        method: \"POST\",\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({ order: createOrderData })\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};","import React from 'react'\r\nimport {API} from '../config'\r\n\r\nconst ShowImage = ({item, url}) => (\r\n    <div className=\"product-img\">\r\n        <img \r\n            src={`${API}/${url}/photo/${item._id}`} \r\n            alt={item.name} className=\"mb-3\" \r\n            style={{height: 200}}\r\n            //maxHeight: '100%', maxWidth: '100%'\r\n        />\r\n    </div>\r\n)\r\n\r\nexport default ShowImage;","import React, { useState } from 'react'\r\nimport { Link, Redirect } from 'react-router-dom'\r\nimport ShowImage from './showImage'\r\nimport moment from 'moment';\r\nimport { addItem, updateItem, removeItem } from './cartHelpers';\r\n\r\nconst Card = ({\r\n    product,\r\n    showViewProductButton = true,\r\n    showAddToCartButton = true,\r\n    cartUpdate = false,\r\n    showRemoveProductButton = false,\r\n    setRun = f => f,\r\n    run = undefined\r\n}) => {\r\n\r\n    const [redirect, setRedirect] = useState(false);\r\n    const [count, setCount] = useState(product.count);\r\n\r\n    const showViewButton = showViewProductButton => {\r\n        return (\r\n            showViewProductButton && (\r\n                <Link to={`/product/${product._id}`} className=\"mr-2\">\r\n                    <button className=\"btn btn-primary mt-2 mb-2 card-btn-1\">View Product</button>\r\n                </Link>\r\n            )\r\n        );\r\n    };\r\n\r\n    const addToCart = () => {\r\n        // console.log('added');\r\n        addItem(product, setRedirect(true));\r\n    };\r\n\r\n    const shouldRedirect = redirect => {\r\n        if (redirect) {\r\n            return <Redirect to=\"/cart\" />;\r\n        }\r\n    };\r\n\r\n    const showAddToCartBtn = showAddToCartButton => {\r\n        return (\r\n            showAddToCartButton && (\r\n                <button onClick={addToCart} className=\"btn btn-warning mt-2 mb-2 card-btn-1  \">\r\n                    Add to cart\r\n                </button>\r\n            )\r\n        );\r\n    };\r\n\r\n    const showStock = quantity => {\r\n        return quantity > 0 ? (\r\n            <span className=\"badge badge-primary badge-pill mr-3\">In Stock </span>\r\n        ) : (\r\n                <span className=\"badge badge-primary badge-pill\">Out of Stock </span>\r\n            );\r\n    };\r\n\r\n    const handleChange = productId => event => {\r\n        setRun(!run); // run useEffect in parent Cart\r\n        setCount(event.target.value < 1 ? 1 : event.target.value);\r\n        if (event.target.value >= 1) {\r\n            updateItem(productId, event.target.value);\r\n        }\r\n    };\r\n\r\n    const showCartUpdateOptions = cartUpdate => {\r\n        return (\r\n            cartUpdate && (\r\n                <div>\r\n                    <div className=\"input-group mb-3\">\r\n                        <div className=\"input-group-prepend\">\r\n                            <span className=\"input-group-text\">Adjust Quantity</span>\r\n                        </div>\r\n                        <input type=\"number\" className=\"form-control\" value={count} onChange={handleChange(product._id)} />\r\n                    </div>\r\n                </div>\r\n            )\r\n        );\r\n    };\r\n\r\n    const showRemoveButton = showRemoveProductButton => {\r\n        return (\r\n          showRemoveProductButton && (\r\n            <button\r\n              onClick={() => {\r\n                removeItem(product._id);\r\n                setRun(!run); // run useEffect in parent Cart\r\n              }}\r\n              className=\"btn btn-outline-danger mt-2 mb-2\"\r\n            >\r\n              Remove Product\r\n            </button>\r\n          )\r\n        );\r\n      };\r\n\r\n    return (\r\n        <div className=\"mb-3\">\r\n            <div className=\"card\" style={{backgroundColor: '#F8F8F8'}}>\r\n                <div className=\"card-header name\" style={{backgroundColor: '#202020', color: '#ffffff', fontWeight:\"bold\"}}>{product.name}</div>\r\n                <div className=\"card-body\" style={{backgroundColor: '#F1F1F1'}}>\r\n                    {shouldRedirect(redirect)}\r\n                    <ShowImage className=\"m-auto\" item={product} url=\"product\"/>\r\n                    <p className=\"card-p  mt-2\">{product.description.substring(0, 100)}</p>\r\n                    <p className=\"card-p\" style={{ color: 'green', fontWeight: 'bold' }}>{product.price}</p>\r\n                    <p className=\"black-9\"><b>Category:</b>  {product.category && product.category.name}</p>\r\n                    <p className=\"black-8\" style={{ color: 'grey' }}>Added on {moment(product.createdAt).fromNow()}</p>\r\n                    {showStock(product.quantity)}\r\n                    <br />\r\n                    {showViewButton(showViewProductButton)}\r\n                    {showAddToCartBtn(showAddToCartButton)}\r\n                    {showRemoveButton(showRemoveProductButton)}\r\n                    {showCartUpdateOptions(cartUpdate)}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Card;","import React, { useState, useEffect } from \"react\";\r\nimport { getCategories, list } from \"./apiCore\";\r\nimport Card from \"./Card\";\r\n\r\nconst Search = () => {\r\n    const [data, setData] = useState({\r\n        categories: [],\r\n        category: \"\",\r\n        search: \"\",\r\n        results: [],\r\n        searched: false\r\n    });\r\n\r\n    const { categories, category, search, results, searched } = data;\r\n\r\n    const loadCategories = () => {\r\n        getCategories().then(data => {\r\n            if (data.error) {\r\n                console.log(data.error);\r\n            } else {\r\n                setData({ ...data, categories: data });\r\n            }\r\n        });\r\n    };\r\n\r\n    useEffect(() => {\r\n        loadCategories();\r\n    }, []);\r\n\r\n    const searchData = () => {\r\n        // console.log(search, category);\r\n        if (search) {\r\n            list({ search: search || undefined, category: category }).then(\r\n                response => {\r\n                    if (response.error) {\r\n                        console.log(response.error);\r\n                    } else {\r\n                        setData({ ...data, results: response, searched: true });\r\n                    }\r\n                }\r\n            );\r\n        }\r\n    };\r\n\r\n    const searchSubmit = e => {\r\n        e.preventDefault();\r\n        searchData();\r\n    };\r\n\r\n    const handleChange = name => event => {\r\n        setData({ ...data, [name]: event.target.value, searched: false });\r\n    };\r\n\r\n    const searchMessage = (searched, results) => {\r\n        if (searched && results.length > 0) {\r\n            return `Found ${results.length} products`;\r\n        }\r\n        if (searched && results.length < 1) {\r\n            return `No products found`;\r\n        }\r\n    };\r\n\r\n    const searchedProducts = (results = []) => {\r\n        return (\r\n            <div>\r\n                <h2 className=\"mt-4 mb-4\">\r\n                    {searchMessage(searched, results)}\r\n                </h2>\r\n\r\n                <div className=\"row\">\r\n                    {results.map((product, i) => (\r\n                        <div className=\"col-4 mb-3\">\r\n                            <Card key={i} product={product} />\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    const searchForm = () => (\r\n        <form onSubmit={searchSubmit}>\r\n            <span className=\"input-group-text\">\r\n                <div className=\"input-group input-group-lg\">\r\n                    <div className=\"input-group-prepend\">\r\n                        <select\r\n                            className=\"btn mr-2\"\r\n                            onChange={handleChange(\"category\")}\r\n                        >\r\n                            <option value=\"All\">All</option>\r\n                            {categories.map((c, i) => (\r\n                                <option key={i} value={c._id}>\r\n                                    {c.name}\r\n                                </option>\r\n                            ))}\r\n                        </select>\r\n                    </div>\r\n\r\n                    <input\r\n                        type=\"search\"\r\n                        className=\"form-control\"\r\n                        onChange={handleChange(\"search\")}\r\n                        placeholder=\"Search by name\"\r\n                    />\r\n                </div>\r\n                <div className=\"btn ml-1\" style={{ border: \"none\" }}>\r\n                    <button type=\"button\" className=\"btn btn-primary\">Search</button>\r\n                </div>\r\n            </span>\r\n        </form>\r\n    );\r\n\r\n    return (\r\n        <div className=\"row\">\r\n            <div className=\"container mb-3\">{searchForm()}</div>\r\n            <div className=\"container-fluid mb-3\">\r\n                {searchedProducts(results)}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Search;\r\n","import React, { useState, useEffect } from 'react'\r\nimport Layout from './Layout'\r\nimport { getProducts } from './apiCore'\r\nimport Card from './Card'\r\nimport Search from './Search';\r\n\r\nconst Home = () => {\r\n    const [productsBySell, setProductsBySell] = useState([])\r\n    const [productsByArrival, setProductsByArrival] = useState([])\r\n    const [error, setError] = useState(false)\r\n\r\n    const loadProductsBySell = () => {\r\n        getProducts('sold').then(data => {\r\n            if (data.error) {\r\n                setError(data.error)\r\n            } else {\r\n                setProductsBySell(data)\r\n            }\r\n        })\r\n    }\r\n\r\n    const loadProductsByArrival = () => {\r\n        getProducts('createdAt').then(data => {\r\n            if (data.error) {\r\n                setError(data.error)\r\n            } else {\r\n                setProductsByArrival(data)\r\n            }\r\n        })\r\n    }\r\n\r\n    useEffect(() => {\r\n        loadProductsByArrival();\r\n        loadProductsBySell();\r\n    }, [])\r\n\r\n    return (\r\n        <Layout title=\"Home\" description=\"Welcome to Gutten Shop\" className=\"container-fluid\">\r\n            <Search />\r\n            <h2 className=\"mb-4\">New Arrivals</h2>\r\n            <div className=\"row d-flex flex-wrap\">\r\n                {productsByArrival.map((product, i) => (\r\n                    <div key={i} className=\"col-lg-3 col-md-4 col-sm-12 mb-3\">\r\n                        <Card product={product} />\r\n                    </div>\r\n                ))}\r\n            </div>\r\n\r\n            <h2 className=\"mb-4\"> Best Sellers</h2>\r\n            <div className=\"row d-flex flex-wrap\">\r\n                {productsBySell.map((product, i) => (\r\n                    <div key={i} className=\"col-lg-3 col-md-4 col-sm-12 mb-3\">\r\n                        <Card product={product} />\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </Layout>\r\n    )\r\n};\r\n\r\nexport default Home;","import React, { Component } from \"react\"\r\nimport {Route, Redirect} from 'react-router-dom'\r\nimport {isAuthenticated} from './index'\r\n\r\nconst PrivateRoute =({ component: Component, ...rest }) => (\r\n    <Route \r\n        {...rest}\r\n        render={props =>\r\n            isAuthenticated() ? (\r\n            <Component {...props} />\r\n    ) : (\r\n        <Redirect to={{pathname: '/signin', state: {from: props.location}}} />\r\n    )} />\r\n)\r\n\r\nexport default PrivateRoute;","import React, { useState, useEffect } from \"react\";\r\nimport Layout from \"../core/Layout\";\r\nimport { isAuthenticated } from \"../auth\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { getPurchaseHistory } from \"./apiUser\";\r\nimport moment from \"moment\";\r\n\r\nconst Dashboard = () => {\r\n    const [history, setHistory] = useState([]);\r\n\r\n    const {\r\n        user: { _id, name, email, role }\r\n    } = isAuthenticated();\r\n    const token = isAuthenticated().token;\r\n\r\n    const init = (userId, token) => {\r\n        getPurchaseHistory(userId, token).then(data => {\r\n            if (data.error) {\r\n                console.log(data.error);\r\n            } else {\r\n                setHistory(data);\r\n            }\r\n        });\r\n    };\r\n\r\n    useEffect(() => {\r\n        init(_id, token);\r\n    }, []);\r\n\r\n    const userLinks = () => {\r\n        return (\r\n            <div className=\"card\">\r\n                <h4 className=\"card-header\">User Links</h4>\r\n                <ul className=\"list-group\">\r\n                    <li className=\"list-group-item\">\r\n                        <Link className=\"nav-link\" to=\"/cart\">\r\n                            My Cart\r\n                        </Link>\r\n                    </li>\r\n                    <li className=\"list-group-item\">\r\n                        <Link className=\"nav-link\" to={`/profile/${_id}`}>\r\n                            Update Profile\r\n                        </Link>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    const userInfo = () => {\r\n        return (\r\n            <div className=\"card mb-5\">\r\n                <h3 className=\"card-header\">User Information</h3>\r\n                <ul className=\"list-group\">\r\n                    <li className=\"list-group-item\">{name}</li>\r\n                    <li className=\"list-group-item\">{email}</li>\r\n                    <li className=\"list-group-item\">\r\n                        {role === 1 ? \"Admin\" : \"Registered User\"}\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    const purchaseHistory = history => {\r\n        return (\r\n            <div className=\"card mb-5 d-flex flex-wrap\">\r\n                <h3 className=\"card-header\">Purchase history</h3>\r\n                <ul className=\"list-group \">\r\n                    <li className=\"list-group-item\">\r\n                        {history.map((h, i) => {\r\n                            return (\r\n                                <div>\r\n                                    {h.products.map((p, i) => {\r\n                                        return (\r\n                                            <div key={i} className=\"card m-4\">\r\n                                                <h6 className=\"card-header bg-dark text-white\">{p.name}</h6>\r\n                                                <h6 className=\"ml-3 mt-2\">\r\n                                                    Price: {p.price}\r\n                                                </h6>\r\n                                                <h6 className=\"ml-3\">\r\n                                                    Date:{\" \"}\r\n                                                    {moment(h.createdAt).fromNow()}\r\n                                                </h6>\r\n                                            </div>\r\n                                        );\r\n                                    })}\r\n                                </div>\r\n                            );\r\n                        })}\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    return (\r\n        <Layout\r\n            title=\"Dashboard\"\r\n            description={`G'day ${name}!`}\r\n            className=\"container-fluid\"\r\n        >\r\n            <div className=\"row\">\r\n                <div className=\"col-lg-3 col-md-3 col-sm-12 mb-3\">{userLinks()}</div>\r\n                <div className=\"col-lg-9 col-md-9 col-sm-12\">\r\n                    {userInfo()}\r\n                    {purchaseHistory(history)}\r\n                </div>\r\n            </div>\r\n        </Layout>\r\n    );\r\n};\r\n\r\nexport default Dashboard;\r\n","import { API } from \"../config\";\n\nexport const read = (userId, token) => {\n    return fetch(`${API}/user/${userId}`, {\n        method: \"GET\",\n        headers: {\n            Accept: \"application/json\",\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${token}`\n        }\n    })\n        .then(response => {\n            return response.json();\n        })\n        .catch(err => console.log(err));\n};\n\nexport const update = (userId, token, user) => {\n    return fetch(`${API}/user/${userId}`, {\n        method: \"PUT\",\n        headers: {\n            Accept: \"application/json\",\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${token}`\n        },\n        body: JSON.stringify(user)\n    })\n        .then(response => {\n            return response.json();\n        })\n        .catch(err => console.log(err));\n};\n\nexport const updateUser = (user, next) => {\n    if (typeof window !== \"undefined\") {\n        if (localStorage.getItem(\"jwt\")) {\n            let auth = JSON.parse(localStorage.getItem(\"jwt\"));\n            auth.user = user;\n            localStorage.setItem(\"jwt\", JSON.stringify(auth));\n            next();\n        }\n    }\n};\n\nexport const getPurchaseHistory = (userId, token) => {\n    return fetch(`${API}/orders/by/user/${userId}`, {\n        method: \"GET\",\n        headers: {\n            Accept: \"application/json\",\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${token}`\n        }\n    })\n        .then(response => {\n            return response.json();\n        })\n        .catch(err => console.log(err));\n};\n","import React, { Component } from \"react\"\r\nimport {Route, Redirect} from 'react-router-dom'\r\nimport {isAuthenticated} from './index'\r\n\r\nconst AdminRoute =({ component: Component, ...rest }) => (\r\n    <Route \r\n        {...rest}\r\n        render={props =>\r\n            isAuthenticated() && isAuthenticated().user.role === 1 ? (\r\n            <Component {...props} />\r\n    ) : (\r\n        <Redirect to={{pathname: '/signin', state: {from: props.location}}} />\r\n    )} />\r\n)\r\n\r\nexport default AdminRoute;","import React from 'react'\r\nimport Layout from '../core/Layout'\r\nimport { isAuthenticated } from '../auth/index'\r\nimport {Link} from 'react-router-dom'\r\n\r\nconst AdminDashboard = () => {\r\n    \r\n    const {user: {_id, name, email, role}} = isAuthenticated()\r\n    \r\n    const adminLinks = () => {\r\n        return(\r\n            <div className=\"card\">\r\n                <h4 className=\"card-header\">User Links</h4>\r\n                <ul className=\"list-group\">\r\n                    <li className=\"list-group-item\">\r\n                        <Link className=\"nav-link\" to=\"/create/category\">\r\n                            Create Category\r\n                        </Link>\r\n                    </li>\r\n                    <li className=\"list-group-item\">\r\n                        <Link className=\"nav-link\" to=\"/create/product\">\r\n                            Create Product\r\n                        </Link>\r\n                    </li>\r\n                    <li className=\"list-group-item\">\r\n                        <Link className=\"nav-link\" to=\"/admin/orders\">\r\n                            View Orders\r\n                        </Link>\r\n                    </li>\r\n                    <li className=\"list-group-item\">\r\n                        <Link className=\"nav-link\" to=\"/admin/products\">\r\n                            Manage Products\r\n                        </Link>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const adminInfo = () => {\r\n        return(\r\n            <div className=\"card mb-5\">\r\n                <h3 className=\"card-header\">\r\n                    Admin Information\r\n                </h3>\r\n                <ul className=\"list-group\">\r\n                    <li className=\"list-group-item\">{name}</li>\r\n                    <li className=\"list-group-item\">{email}</li>\r\n                    <li className=\"list-group-item\">{role === 1 ? 'Admin' : 'Registered User'}</li>\r\n                </ul>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <Layout title=\"Dashboard\" description= {`Hello, ${name}`} className=\"container\">\r\n            <div className=\"row\">\r\n                <div className=\"col-lg-3 col-md-3 col-sm-12 mb-3\">\r\n                    {adminLinks()}\r\n                </div>\r\n                <div className=\"col-lg-9 col-md-9 col-sm-12\">\r\n                    {adminInfo()}\r\n                </div>\r\n            </div>            \r\n        </Layout>\r\n    )\r\n}\r\n\r\nexport default AdminDashboard;","import { API } from '../config'\r\n\r\nexport const createCategory = (userId, token, category) => {\r\n    return fetch(`${API}/category/create/${userId}`, {\r\n        method: \"POST\",\r\n        headers: {\r\n            Accept: 'application/json',\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify(category)\r\n    })\r\n        .then(response => {\r\n            return response.json()\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n        })\r\n};\r\n\r\nexport const createProduct = (userId, token, product) => {\r\n    return fetch(`${API}/product/create/${userId}`, {\r\n        method: \"POST\",\r\n        headers: {\r\n            Accept: 'application/json',\r\n            Authorization: `Bearer ${token}`\r\n        },\r\n        body: product\r\n    })\r\n        .then(response => {\r\n            return response.json()\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n        })\r\n}\r\n\r\nexport const getCategories = () => {\r\n    return fetch(`${API}/categories`, {\r\n        method: \"GET\"\r\n    })\r\n    .then(response => {\r\n        return response.json()\r\n    })\r\n    .catch(err => console.log(err))\r\n\r\n};\r\n\r\nexport const listOrders = (userId, token) => {\r\n    return fetch(`${API}/order/list/${userId}`, {\r\n        method: 'GET',\r\n        headers: {\r\n            Accept: 'application/json',\r\n            Authorization: `Bearer ${token}`\r\n        }\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n\r\nexport const getStatusValues = (userId, token) => {\r\n    return fetch(`${API}/order/status-values/${userId}`, {\r\n        method: 'GET',\r\n        headers: {\r\n            Accept: 'application/json',\r\n            Authorization: `Bearer ${token}`\r\n        }\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n\r\nexport const updateOrderStatus = (userId, token, orderId, status) => {\r\n    return fetch(`${API}/order/${orderId}/status/${userId}`, {\r\n        method: 'PUT',\r\n        headers: {\r\n            Accept: 'application/json',\r\n            'Content-Type': 'application/json',\r\n            Authorization: `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify({ status, orderId })\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n\r\n/**\r\n * to perform crud on product\r\n * get all products\r\n * get a single product\r\n * update single product\r\n * delete single product\r\n */\r\n\r\nexport const getProducts = () => {\r\n    return fetch(`${API}/products?limit=undefined`, {\r\n        method: 'GET'\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n\r\nexport const deleteProduct = (productId, userId, token) => {\r\n    return fetch(`${API}/product/${productId}/${userId}`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n            Accept: 'application/json',\r\n            'Content-Type': 'application/json',\r\n            Authorization: `Bearer ${token}`\r\n        }\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n\r\nexport const getProduct = productId => {\r\n    return fetch(`${API}/product/${productId}`, {\r\n        method: 'GET'\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n\r\nexport const updateProduct = (productId, userId, token, product) => {\r\n    return fetch(`${API}/product/${productId}/${userId}`, {\r\n        method: 'PUT',\r\n        headers: {\r\n            Accept: 'application/json',\r\n            Authorization: `Bearer ${token}`\r\n        },\r\n        body: product\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};","import React, {useState} from 'react'\r\nimport Layout from '../core/Layout'\r\nimport { isAuthenticated } from '../auth/index'\r\nimport { Link } from 'react-router-dom'\r\nimport {createCategory} from './ApiAdmin'\r\n\r\nconst AddCategory = () => {\r\n    const[name, setName] = useState('')\r\n\r\n    const[error, setError] = useState(false)\r\n\r\n    const[success, setSuccess] = useState(false)\r\n\r\n    // destructure user and info from localstorage\r\n\r\n    const {user, token} = isAuthenticated()\r\n\r\n    const handleChange = e => {\r\n        setError('')\r\n        setName(e.target.value)\r\n    }\r\n\r\n    const clickSubmit = e => {\r\n        e.preventDefault();\r\n        setError(\"\");\r\n        setSuccess(false);\r\n        //make request to api to create category\r\n        createCategory(user._id, token, {name})\r\n        .then(data => {\r\n            console.log(data.error)\r\n            if (data.error) {\r\n                setError(true);\r\n            }else {\r\n                setError('');\r\n                setSuccess(true);\r\n            }\r\n        })\r\n    }\r\n\r\n    const newCategoryForm = () => (\r\n        <form onSubmit={clickSubmit} className=\"text-center\">\r\n            <div className=\"form-group text-left\">\r\n                <label className=\"text-muted\">Name</label>\r\n                <input type=\"text\" className=\"form-control\" onChange={handleChange} value={name} autoFocus required/>\r\n            </div>\r\n                <button className=\"btn btn-outline-primary\">Create Category</button>\r\n        </form>\r\n    );\r\n\r\n    const showSuccess = () => {\r\n        if(success){\r\n            return <h3 className=\"text-success\">Category <b>{name}</b> is created</h3>\r\n        }\r\n    }\r\n\r\n    const showError = () => {\r\n        if(error){\r\n            return <h3 className=\"text-danger\">Category should be unique</h3>\r\n        }\r\n    }\r\n\r\n    const goBack = () => (\r\n        <div className=\"mt-5\">\r\n            <Link to=\"/admin/dashboard\" className=\"text-warning\" >Back to Dashboard</Link>\r\n        </div>\r\n    )\r\n\r\n    return(\r\n        <Layout title=\"Add a new category\" description= {`Hello ${user.name}, You can create new product categories here.`}>\r\n            <div className=\"row\">\r\n                <div className=\"col-md-6 offset-md-3\">\r\n                    {showError()}\r\n                    {showSuccess()}\r\n                    {newCategoryForm()}\r\n                    {goBack()}\r\n                </div>\r\n            </div>            \r\n        </Layout>\r\n    )\r\n}\r\n\r\nexport default AddCategory;","import React, {useState, useEffect} from 'react'\r\nimport Layout from '../core/Layout'\r\nimport { isAuthenticated } from '../auth/index'\r\nimport { Link } from 'react-router-dom'\r\nimport {createProduct, getCategories} from './ApiAdmin'\r\n\r\nconst AddProduct = () =>{\r\n\r\n    const [values, setValues] = useState({\r\n        name: '',\r\n        description: '',\r\n        price: '',\r\n        categories: [],\r\n        category: '',\r\n        shipping: '',\r\n        quantity: '',\r\n        photo: '',\r\n        loading: false,\r\n        error: '',\r\n        createdProduct: '',\r\n        redirectToProfile: false,\r\n        formData: ''\r\n    }) \r\n\r\n    const {user, token} = isAuthenticated();\r\n\r\n    const {\r\n        name,\r\n        description,\r\n        price,\r\n        categories,\r\n        category,\r\n        shipping,\r\n        quantity,\r\n        loading,\r\n        error,\r\n        createdProduct,\r\n        redirectToProfile,\r\n        formData\r\n    } = values;\r\n\r\n    // load categories\r\n\r\n    const init = () => {\r\n        getCategories().then(data => {\r\n            if(data.error){\r\n                setValues({...values, error: data.error})\r\n            }else{\r\n                setValues({...values, categories: data, formData: new FormData()})\r\n            }\r\n        })\r\n    }\r\n\r\n    useEffect(()=>{\r\n        init();\r\n    },[]);\r\n\r\n    const handleChange = name => event => {\r\n        const value = name === 'photo' ? event.target.files[0] : event.target.value\r\n        formData.set(name, value)\r\n        setValues({...values,[name]: value})\r\n    }\r\n\r\n    const clickSubmit = (event) => {\r\n        event.preventDefault()\r\n        setValues({...values, error:'', loading: true})\r\n\r\n        createProduct(user._id, token, formData)\r\n        .then(data=>{\r\n            if(data.error){\r\n                setValues({...values, error: data.error})\r\n            }else {\r\n                setValues({\r\n                    ...values, name: '',\r\n                    description: '',\r\n                    quantity: '',\r\n                    photo: '',\r\n                    loading: false,\r\n                    createdProduct: data.name,\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    const newPostForm = () => (\r\n        <form className=\"mb-3\" onSubmit={clickSubmit}>\r\n            <h4>Post Photo</h4>\r\n            <div className=\"form-group\">\r\n                <label className=\"btn btn-secondary\">\r\n                    <input onChange={handleChange('photo')} type=\"file\" name=\"photo\" accept=\"image/*\" />\r\n                </label>\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Name</label>\r\n                <input onChange={handleChange('name')} type=\"text\" className=\"form-control\" value={name} />\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Description</label>\r\n                <textarea onChange={handleChange('description')} className=\"form-control\" value={description} />\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Price</label>\r\n                <input onChange={handleChange('price')} type=\"number\" className=\"form-control\" value={price} />\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Category</label>\r\n                <select onChange={handleChange('category')} className=\"form-control\">\r\n                    <option>Please Select</option>\r\n                        {categories && categories.map((c,i)=>(\r\n                            <option key={i} value={c._id}> {c.name} </option>\r\n                            ))\r\n                        }\r\n                </select>\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Quantity</label>\r\n                <input onChange={handleChange('quantity')} type=\"number\" className=\"form-control\" value={quantity} />\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <label className=\"text-muted\">Shipping</label>\r\n                <select onChange={handleChange('shipping')} className=\"form-control\">\r\n                <option>Please Select</option>\r\n                    <option value=\"0\">No</option>\r\n                    <option value=\"0\">Yes</option>\r\n                </select>\r\n            </div>\r\n\r\n            <button className=\"btn btn-outline-primary\">\r\n                Create Product\r\n            </button>\r\n        </form>\r\n    );\r\n\r\n    const showError = () => (\r\n        <div className=\"alert alert-danger\" style={{display: error ? '' : 'none'}}>\r\n            {error}\r\n        </div>\r\n    )\r\n\r\n    const showSuccess = () => (\r\n        <div className=\"alert alert-info\" style={{display: createdProduct ? \"\" : 'none'}}>\r\n            <h2>{`${createdProduct}`} is created!</h2>\r\n        </div>\r\n    )\r\n\r\n    const showLoading = () => (\r\n        loading && (<div className=\"alert alert-success\"><h2>Loading...</h2></div>)\r\n    )\r\n\r\n    return (\r\n        <Layout title=\"Add a new Product\" description= {`Hello ${user.name}, You can add new products here.`}>\r\n            <div className=\"row\">\r\n                <div className=\"col-md-6 offset-md-3\">\r\n                    {showError()}\r\n                    {showLoading()}\r\n                    {showSuccess()}\r\n                    {newPostForm()}\r\n                </div>\r\n            </div>            \r\n        </Layout>\r\n    )\r\n}\r\n\r\nexport default AddProduct;","import React, {useState, useEffect} from 'react'\r\n\r\n\r\nconst Checkbox = ({categories, handleFilters}) => {\r\n\r\n    const [checked, setChecked] = useState([])\r\n\r\n    const handleToggle = c => () => {\r\n        const currentCategoryId = checked.indexOf(c) // return first index or -1\r\n        const newCheckedCategoryId = [...checked]\r\n\r\n        if(currentCategoryId === -1){\r\n            newCheckedCategoryId.push(c)\r\n        }else{\r\n            newCheckedCategoryId.splice(currentCategoryId, 1)\r\n        }\r\n        // console.log(newCheckedCategoryId)\r\n        setChecked(newCheckedCategoryId)\r\n        handleFilters(newCheckedCategoryId)\r\n    }\r\n\r\n    return categories.map((c,i)=>(\r\n        <li key={i} className=\"list-unstyled\">\r\n            <input onChange={handleToggle(c._id)} value={checked.indexOf(c._id === -1)} type=\"checkbox\" className=\"form-check-input\" />\r\n            <label className=\"form-check-label\">\r\n                {c.name}\r\n            </label>\r\n        </li>\r\n    ))\r\n}\r\n\r\nexport default Checkbox;","import React, { useState } from \"react\";\r\n\r\nconst RadioBox = ({ prices, handleFilters }) => {\r\n    const [value, setValue] = useState(0);\r\n\r\n    const handleChange = event => {\r\n        handleFilters(event.target.value);\r\n        setValue(event.target.value);\r\n    };\r\n\r\n    return prices.map((p, i) => (\r\n        <div key={i}>\r\n            <input\r\n                onChange={handleChange}\r\n                value={`${p._id}`}\r\n                name={p}\r\n                type=\"radio\"\r\n                className=\"mr-2 ml-4\"\r\n            />\r\n            <label className=\"form-check-label\">{p.name}</label>\r\n        </div>\r\n    ));\r\n};\r\n\r\nexport default RadioBox;\r\n","export const prices = [\r\n    {\r\n        _id: 0,\r\n        name: \"Any\",\r\n        array: []\r\n    },\r\n    {\r\n        _id: 1,\r\n        name: \"0 to 99\",\r\n        array: [0, 99]\r\n    },\r\n    {\r\n        _id: 2,\r\n        name: \"100 to 299\",\r\n        array: [100, 299]\r\n    },\r\n    {\r\n        _id: 3,\r\n        name: \"300 to 599\",\r\n        array: [300, 599]\r\n    },\r\n    {\r\n        _id: 4,\r\n        name: \"600 to 899\",\r\n        array: [600, 899]\r\n    },\r\n    {\r\n        _id: 5,\r\n        name: \"More than 900\",\r\n        array: [900, 9999]\r\n    }\r\n];\r\n","import React, { useState, useEffect } from 'react'\r\nimport Layout from './Layout'\r\nimport Card from './Card'\r\nimport {getCategories, getFilteredProducts} from './apiCore'\r\nimport Checkbox from './checkbox'\r\nimport RadioBox from \"./RadioBox\";\r\nimport { prices } from \"./fixedPrices\";\r\n\r\nconst Shop = () => {\r\n    const [myFilters, setMyFilters] = useState({\r\n        filters: { category: [], price: [] }\r\n    });\r\n\r\n    const [categories, setCategories] = useState([])\r\n    const [error, setError] = useState(false)\r\n    const [limit, setLimit] = useState(6);\r\n    const [skip, setSkip] = useState(0);\r\n    const [size, setSize] = useState(0);\r\n    const [filteredResults, setFilteredResults] = useState([]);\r\n\r\n    const init = () => {\r\n        getCategories().then(data => {\r\n            if(data.error){\r\n                setError(data.error)\r\n            }else{\r\n                setCategories(data)\r\n            }\r\n        })\r\n    }\r\n\r\n    const loadMore = () => {\r\n        let toSkip = skip + limit;\r\n        // console.log(newFilters);\r\n        getFilteredProducts(toSkip, limit, myFilters.filters).then(data => {\r\n            if (data.error) {\r\n                setError(data.error);\r\n            } else {\r\n                setFilteredResults([...filteredResults, ...data.data]);\r\n                setSize(data.size);\r\n                setSkip(toSkip);\r\n            }\r\n        });\r\n    };\r\n\r\n    const loadMoreButton = () => {\r\n        return (\r\n            size > 0 &&\r\n            size >= limit && (\r\n                <button onClick={loadMore} className=\"btn btn-warning mb-5\">\r\n                    Load more\r\n                </button>\r\n            )\r\n        );\r\n    };\r\n\r\n    useEffect(()=>{\r\n        init()\r\n        loadFilteredResults(skip, limit, myFilters.filters);\r\n    }, [])\r\n    \r\n    const handleFilters = (filters, filterBy) => {\r\n        const newFilters = { ...myFilters };\r\n        newFilters.filters[filterBy] = filters;\r\n\r\n        if (filterBy === \"price\") {\r\n            let priceValues = handlePrice(filters);\r\n            newFilters.filters[filterBy] = priceValues;\r\n        }\r\n        loadFilteredResults(myFilters.filters);\r\n        setMyFilters(newFilters);\r\n    }\r\n\r\n    const handlePrice = value => {\r\n        const data = prices;\r\n        let array = [];\r\n\r\n        for (let key in data) {\r\n            if (data[key]._id === parseInt(value)) {\r\n                array = data[key].array;\r\n            }\r\n        }\r\n        return array;\r\n    };\r\n    \r\n    const loadFilteredResults = newFilters => {\r\n        // console.log(newFilters);\r\n        getFilteredProducts(skip, limit, newFilters).then(data => {\r\n            if (data.error) {\r\n                setError(data.error);\r\n            } else {\r\n                setFilteredResults(data.data);\r\n                setSize(data.size);\r\n                setSkip(0);\r\n            }\r\n        });\r\n    };\r\n\r\n    return(\r\n        <Layout title=\"Shop\" description=\"Search and find any book you need\" className=\"container-fluid\">\r\n            <div className=\"col\">\r\n                <div className=\"col-12 d-flex flex-row justify-content-around\">\r\n                    <div>\r\n                        <h4>Filter by categories</h4>\r\n                        <ul>\r\n                            <Checkbox\r\n                                categories={categories}\r\n                                handleFilters={filters =>\r\n                                    handleFilters(filters, \"category\")\r\n                                }\r\n                            />\r\n                        </ul>\r\n                    </div>\r\n                    <div classname=\"m-10\">\r\n                        <h4>Filter by price range</h4>\r\n                        <div>\r\n                            <RadioBox\r\n                                prices={prices}\r\n                                handleFilters={filters =>\r\n                                    handleFilters(filters, \"price\")\r\n                                }\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"col-12\">\r\n                <h2 className=\"mb-4\">Products</h2>\r\n                    <div className=\"row d-flex flex-wrap\">\r\n                        {filteredResults.map((product, i) => (\r\n                                <div key={i} className=\"col-xl-3 col-lg-4 col-md-6 col-sm-12 mb-3\">\r\n                                    <Card product={product} />\r\n                                </div>\r\n                        ))}\r\n                    </div>\r\n                    <hr />\r\n                    {loadMoreButton()}\r\n                </div>\r\n            </div>\r\n        </Layout>\r\n    )\r\n}\r\n\r\nexport default Shop;","import React, { useState, useEffect } from 'react';\r\nimport Layout from './Layout';\r\nimport { read, listRelated } from './apiCore';\r\nimport Card from './Card';\r\n\r\nconst Product = props => {\r\n    const [product, setProduct] = useState({});\r\n    const [relatedProduct, setRelatedProduct] = useState([]);\r\n    const [error, setError] = useState(false);\r\n\r\n    const loadSingleProduct = productId => {\r\n        read(productId).then(data => {\r\n            if (data.error) {\r\n                setError(data.error);\r\n            } else {\r\n                setProduct(data);\r\n                // fetch related products\r\n                listRelated(data._id).then(data => {\r\n                    if (data.error) {\r\n                        setError(data.error);\r\n                    } else {\r\n                        setRelatedProduct(data);\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    };\r\n\r\n    useEffect(() => {\r\n        const productId = props.match.params.productId;\r\n        loadSingleProduct(productId);\r\n    }, [props]);\r\n\r\n    return (\r\n        <Layout\r\n            title={product && product.name}\r\n            description={product && product.description && product.description.substring(0, 100)}\r\n            className=\"container-fluid\"\r\n        >\r\n            <div className=\"row\">\r\n                <div className=\"col-8\">\r\n                    {product && product.description && \r\n                        <Card product={product} showViewProductButton={false} />\r\n                    }\r\n                </div>\r\n\r\n                <div className=\"col-4\">\r\n                    <h4>Related products</h4>\r\n                    {relatedProduct.map((p, i) => (\r\n                        <div className=\"mb-3\" key={i}>\r\n                            <Card product={p} />\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        </Layout>\r\n    );\r\n};\r\n\r\nexport default Product;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { getProducts, getBraintreeClientToken, processPayment, createOrder } from './apiCore';\r\nimport { emptyCart } from './cartHelpers';\r\nimport Card from './Card';\r\nimport { isAuthenticated } from '../auth';\r\nimport { Link } from 'react-router-dom';\r\nimport DropIn from 'braintree-web-drop-in-react';\r\n\r\nconst Checkout = ({ products, setRun = f => f, run = undefined }) => {\r\n    const [data, setData] = useState({\r\n        loading: false,\r\n        success: false,\r\n        clientToken: null,\r\n        error: '',\r\n        instance: {},\r\n        address: ''\r\n    });\r\n\r\n    const userId = isAuthenticated() && isAuthenticated().user._id;\r\n    const token = isAuthenticated() && isAuthenticated().token;\r\n\r\n    const getToken = (userId, token) => {\r\n        getBraintreeClientToken(userId, token).then(data => {\r\n            if (data.error) {\r\n                console.log(data.error);\r\n                setData({ ...data, error: data.error });\r\n            } else {\r\n                console.log(data);\r\n                setData({ clientToken: data.clientToken });\r\n            }\r\n        });\r\n    };\r\n\r\n    useEffect(() => {\r\n        getToken(userId, token);\r\n    }, []);\r\n\r\n    const showCheckout = () => {\r\n        return isAuthenticated() ? (\r\n            <div>{showDropIn()}</div>\r\n        ) : (\r\n                <Link to=\"/signin\">\r\n                    <button className=\"btn btn-primary\">Sign in to checkout</button>\r\n                </Link>\r\n            );\r\n    };\r\n\r\n    const getTotal = () => {\r\n        return products.reduce((currentValue, nextValue) => {\r\n            return currentValue + nextValue.count * nextValue.price;\r\n        }, 0);\r\n    };\r\n    const showError = error => (\r\n        <div className=\"alert alert-danger\" style={{ display: error ? '' : 'none' }}>\r\n            {error}\r\n        </div>\r\n    );\r\n\r\n    const showSuccess = success => (\r\n        <div className=\"alert alert-info\" style={{ display: success ? '' : 'none' }}>\r\n            Thanks! Your payment was successful!\r\n        </div>\r\n    );\r\n\r\n    const handleAddress = event => {\r\n        setData({ ...data, address: event.target.value });\r\n    };\r\n\r\n    let deliveryAddress = data.address;\r\n\r\n    const buy = () => {\r\n        setData({ loading: true });\r\n\r\n        let nonce;\r\n        let getNonce = data.instance\r\n            .requestPaymentMethod()\r\n            .then(data => {\r\n                // console.log(data);\r\n                nonce = data.nonce;\r\n                const paymentData = {\r\n                    paymentMethodNonce: nonce,\r\n                    amount: getTotal(products)\r\n                };\r\n\r\n                processPayment(userId, token, paymentData)\r\n                    .then(response => {\r\n                        console.log(response);\r\n\r\n                        const createOrderData = {\r\n                            products: products,\r\n                            transaction_id: response.transaction.id,\r\n                            amount: response.transaction.amount,\r\n                            address: deliveryAddress,\r\n                        };\r\n\r\n                        createOrder(userId, token, createOrderData)\r\n                            .then(response => {\r\n                                emptyCart(() => {\r\n                                    setRun(!run); // run useEffect in parent Cart\r\n                                    console.log('payment successfull and cart is empty');\r\n                                    setData({\r\n                                        loading: false,\r\n                                        success: true\r\n                                    });\r\n                                });\r\n                            })\r\n                            .catch(error => {\r\n                                console.log(error);\r\n                                setData({ loading: false });\r\n                            });\r\n                    })\r\n                    .catch(error => {\r\n                        console.log(error);\r\n                        setData({ loading: false });\r\n                    });\r\n            })\r\n            .catch(error => {\r\n                // console.log(\"dropin error: \", error);\r\n                setData({ ...data, error: error.message });\r\n            });\r\n    };\r\n\r\n    const showDropIn = () => (\r\n        <div onBlur={() => setData({ ...data, error: '' })}>\r\n            {data.clientToken !== null && products.length > 0 ? (\r\n                <div>\r\n                    <div className=\"gorm-group mb-3\">\r\n                        <label className=\"text-muted\">Delivery address:</label>\r\n                        <textarea\r\n                            onChange={handleAddress}\r\n                            className=\"form-control\"\r\n                            value={data.address}\r\n                            placeholder=\"Type your delivery address here...\"\r\n                        />\r\n                    </div>\r\n\r\n                    <DropIn\r\n                        options={{\r\n                            authorization: data.clientToken,\r\n                            paypal: {\r\n                                flow: 'vault'\r\n                            }\r\n                        }}\r\n                        onInstance={instance => (data.instance = instance)}\r\n                    />\r\n                    <button onClick={buy} className=\"btn btn-success btn-block\">\r\n                        <b>Pay</b>\r\n                    </button>\r\n                </div>\r\n            ) : null}\r\n        </div>\r\n    );\r\n\r\n    const showLoading = loading => loading && <h2 className=\"text-danger\">Loading...</h2>;\r\n\r\n    return (\r\n        <div>\r\n            <h2>Total: {getTotal()}</h2>\r\n            {showLoading(data.loading)}\r\n            {showSuccess(data.success)}\r\n            {showError(data.error)}\r\n            {showCheckout()}\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default Checkout","import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Layout from './Layout';\r\nimport { getCart } from './cartHelpers';\r\nimport Card from './Card';\r\nimport Checkout from './Checkout';\r\n\r\nconst Cart = () => {\r\n    const [items, setItems] = useState([]);\r\n    const [run, setRun] = useState(false);\r\n\r\n    useEffect(() => {\r\n        setItems(getCart());\r\n    }, [run]);\r\n\r\n    const showItems = items => {\r\n        return (\r\n            <div>\r\n                <h2>Your cart has {`${items.length}`} items</h2>\r\n                <hr />\r\n                {items.map((product, i) => (\r\n                    <Card\r\n                        key={i}\r\n                        product={product}\r\n                        showAddToCartButton={false}\r\n                        cartUpdate={true}\r\n                        showRemoveProductButton={true}\r\n                        setRun={setRun}\r\n                        run={run}\r\n                    />\r\n                ))}\r\n            </div>\r\n        );\r\n    };\r\n\r\n    const noItemsMessage = () => (\r\n        <h2>\r\n            Your cart is empty. <br /> <Link to=\"/shop\">Continue shopping</Link>\r\n        </h2>\r\n    );\r\n\r\n    return (\r\n        <Layout\r\n            title=\"Shopping Cart\"\r\n            description=\"Manage your cart items. Add remove checkout or continue shopping.\"\r\n            className=\"container-fluid\"\r\n        >\r\n            <div className=\"row\">\r\n                <div className=\"col-md-4 col-sm-12\">{items.length > 0 ? showItems(items) : noItemsMessage()}</div>\r\n\r\n                <div className=\"col-md-8 col-sm-12 \">\r\n                    <h2 className=\"mb-4\">Your cart summary</h2>\r\n                    <hr />\r\n                    <Checkout products={items} setRun={setRun} run={run} />\r\n                </div>\r\n            </div>\r\n        </Layout>\r\n    );\r\n};\r\n\r\nexport default Cart;\r\n","import React, { useState, useEffect } from \"react\";\nimport Layout from \"../core/Layout\";\nimport { isAuthenticated } from \"../auth\";\nimport { Link } from \"react-router-dom\";\nimport { listOrders, getStatusValues, updateOrderStatus } from \"./ApiAdmin\";\nimport moment from \"moment\";\n\nconst Orders = () => {\n    const [orders, setOrders] = useState([]);\n    const [statusValues, setStatusValues] = useState([]);\n\n    const { user, token } = isAuthenticated();\n\n    const loadOrders = () => {\n        listOrders(user._id, token).then(data => {\n            if (data.error) {\n                console.log(data.error);\n            } else {\n                setOrders(data);\n            }\n        });\n    };\n\n    const loadStatusValues = () => {\n        getStatusValues(user._id, token).then(data => {\n            if (data.error) {\n                console.log(data.error);\n            } else {\n                setStatusValues(data);\n            }\n        });\n    };\n\n    useEffect(() => {\n        loadOrders();\n        loadStatusValues();\n    }, []);\n\n    const showOrdersLength = () => {\n        if (orders.length > 0) {\n            return (\n                <h1 className=\"text-danger display-2\">\n                    Total orders: {orders.length}\n                </h1>\n            );\n        } else {\n            return <h1 className=\"text-danger\">No orders</h1>;\n        }\n    };\n\n    const showInput = (key, value) => (\n        <div className=\"input-group mb-2 mr-sm-2\">\n            <div className=\"input-group-prepend\">\n                <div className=\"input-group-text\">{key}</div>\n            </div>\n            <input\n                type=\"text\"\n                value={value}\n                className=\"form-control\"\n                readOnly\n            />\n        </div>\n    );\n\n    const handleStatusChange = (e, orderId) => {\n        updateOrderStatus(user._id, token, orderId, e.target.value).then(\n            data => {\n                if (data.error) {\n                    console.log(\"Status update failed\");\n                } else {\n                    loadOrders();\n                }\n            }\n        );\n    };\n\n    const showStatus = o => (\n        <div className=\"form-group\">\n            <h3 className=\"mark mb-4\">Status: {o.status}</h3>\n            <select\n                className=\"form-control\"\n                onChange={e => handleStatusChange(e, o._id)}\n            >\n                <option>Update Status</option>\n                {statusValues.map((status, index) => (\n                    <option key={index} value={status}>\n                        {status}\n                    </option>\n                ))}\n            </select>\n        </div>\n    );\n\n    return (\n        <Layout\n            title=\"Orders\"\n            description={`G'day ${\n                user.name\n            }, you can manage all the orders here`}\n            className=\"container-fluid\"\n        >\n            <div className=\"row\">\n                <div className=\"col-md-8 offset-md-2\">\n                    {showOrdersLength()}\n\n                    {orders.map((o, oIndex) => {\n                        return (\n                            <div\n                                className=\"mt-5\"\n                                key={oIndex}\n                                style={{ borderBottom: \"5px solid indigo\" }}\n                            >\n                                <h2 className=\"mb-5\">\n                                    <span className=\"bg-primary pl-3 pr-3 rounded text-light\">\n                                        Order ID: {o._id}\n                                    </span>\n                                </h2>\n\n                                <ul className=\"list-group mb-2\">\n                                    <li className=\"list-group-item\">\n                                        {showStatus(o)}\n                                    </li>\n                                    <li className=\"list-group-item\">\n                                        Transaction ID: {o.transaction_id}\n                                    </li>\n                                    <li className=\"list-group-item\">\n                                        Amount: {o.amount}\n                                    </li>\n                                    <li className=\"list-group-item\">\n                                        Ordered by: {o.user.name}\n                                    </li>\n                                    <li className=\"list-group-item\">\n                                        Ordered on:{\" \"}\n                                        {moment(o.createdAt).fromNow()}\n                                    </li>\n                                    <li className=\"list-group-item\">\n                                        Delivery address: {o.address}\n                                    </li>\n                                </ul>\n\n                                <h3 className=\"mt-4 mb-4 font-italic\">\n                                    Total products in the order:{\" \"}\n                                    {o.products.length}\n                                </h3>\n\n                                {o.products.map((p, pIndex) => (\n                                    <div\n                                        className=\"mb-4\"\n                                        key={pIndex}\n                                        style={{\n                                            padding: \"20px\",\n                                            border: \"1px solid indigo\"\n                                        }}\n                                    >\n                                        {showInput(\"Product name\", p.name)}\n                                        {showInput(\"Product price\", p.price)}\n                                        {showInput(\"Product total\", p.count)}\n                                        {showInput(\"Product Id\", p._id)}\n                                    </div>\n                                ))}\n                            </div>\n                        );\n                    })}\n                </div>\n            </div>\n        </Layout>\n    );\n};\n\nexport default Orders;\n","import React, { useState, useEffect } from 'react';\nimport Layout from '../core/Layout';\nimport { isAuthenticated } from '../auth';\nimport { Link, Redirect } from 'react-router-dom';\nimport { read, update, updateUser } from './apiUser';\n\nconst Profile = ({ match }) => {\n    const [values, setValues] = useState({\n        name: '',\n        email: '',\n        password: '',\n        error: false,\n        success: false\n    });\n\n    const { token } = isAuthenticated();\n    const { name, email, password, error, success } = values;\n\n    const init = (userId) => {\n        // console.log(userId);\n        read(userId, token).then(data => {\n            if (data.error) {\n                setValues({ ...values, error: true });\n            } else {\n                setValues({ ...values, name: data.name, email: data.email });\n            }\n        });\n    };\n\n    useEffect(() => {\n        init(match.params.userId);\n    }, []);\n\n    const handleChange = name => e => {\n        setValues({ ...values, error: false, [name]: e.target.value });\n    };\n\n    const clickSubmit = e => {\n        e.preventDefault();\n        update(match.params.userId, token, { name, email, password }).then(data => {\n            if (data.error) {\n                // console.log(data.error);\n                alert(data.error);\n            } else {\n                updateUser(data, () => {\n                    setValues({\n                        ...values,\n                        name: data.name,\n                        email: data.email,\n                        success: true\n                    });\n                });\n            }\n        });\n    };\n\n    const redirectUser = success => {\n        if (success) {\n            return <Redirect to=\"/cart\" />;\n        }\n    };\n\n    const profileUpdate = (name, email, password) => (\n        <form className=\" w-100 d-flex flex-column align-items-center\">\n            <div className=\"form-group w-25\">\n                <label className=\"text-muted\">Name</label>\n                <input type=\"text\" onChange={handleChange('name')} className=\"form-control\" value={name} />\n            </div>\n            <div className=\"form-group w-25\">\n                <label className=\"text-muted\">Email</label>\n                <input type=\"email\" onChange={handleChange('email')} className=\"form-control\" value={email} />\n            </div>\n            <div className=\"form-group w-25\">\n                <label className=\"text-muted\">Password</label>\n                <input type=\"password\" onChange={handleChange('password')} className=\"form-control\" value={password} />\n            </div>\n\n            <button onClick={clickSubmit} className=\"btn btn-primary w-25\">\n                Submit\n            </button>\n        </form>\n    );\n\n    return (\n        <Layout title=\"Profile\" description=\"Update your profile\" className=\"container-fluid\">\n            {/* <h2 className=\"mb-4\">Profile update</h2> */}\n            {profileUpdate(name, email, password)}\n            {redirectUser(success)}\n        </Layout>\n    );\n};\n\nexport default Profile;\n","import React, { useState, useEffect } from \"react\";\nimport Layout from \"../core/Layout\";\nimport { isAuthenticated } from \"../auth\";\nimport { Link } from \"react-router-dom\";\nimport { getProducts, deleteProduct } from \"./ApiAdmin\";\n\nconst ManageProducts = () => {\n    const [products, setProducts] = useState([]);\n\n    const { user, token } = isAuthenticated();\n\n    const loadProducts = () => {\n        getProducts().then(data => {\n            if (data.error) {\n                console.log(data.error);\n            } else {\n                setProducts(data);\n            }\n        });\n    };\n\n    const destroy = productId => {\n        deleteProduct(productId, user._id, token).then(data => {\n            if (data.error) {\n                console.log(data.error);\n            } else {\n                loadProducts();\n            }\n        });\n    };\n\n    useEffect(() => {\n        loadProducts();\n    }, []);\n\n    return (\n        <Layout\n            title=\"Manage Products\"\n            description=\"Perform CRUD on products\"\n            className=\"container-fluid\"\n        >\n            <div className=\"row d-flex justify-content-center\">\n                <div className=\"col-8\">\n                    <h2 className=\"text-center\">\n                        Total {products.length} products\n                    </h2>\n                    <hr />\n                    <ul className=\"list-group\">\n                        {products.map((p, i) => (\n                            <li\n                                key={i}\n                                className=\"list-group-item d-flex justify-content-between align-items-center\"\n                            >\n                                <strong>{p.name}</strong>\n                                <div>\n                                    <Link to={`/admin/product/update/${p._id}`} >\n                                        <span className=\"badge badge-warning badge-pill p-2 m-1\">\n                                            Update\n                                        </span>\n                                    </Link>\n                                    <span\n                                        onClick={() => destroy(p._id)}\n                                        className=\"badge badge-danger badge-pill p-2 m-1\"\n                                    >\n                                        Delete\n                                    </span>\n                                </div>\n                            </li>\n                        ))}\n                    </ul>\n                    <br />\n                </div>\n            </div>\n        </Layout>\n    );\n};\n\nexport default ManageProducts;\n","import React, { useState, useEffect } from 'react';\nimport Layout from '../core/Layout';\nimport { isAuthenticated } from '../auth';\nimport { Link, Redirect } from 'react-router-dom';\nimport { getProduct, getCategories, updateProduct } from './ApiAdmin';\n\nconst UpdateProduct = ({ match }) => {\n    const [values, setValues] = useState({\n        name: '',\n        description: '',\n        price: '',\n        categories: [],\n        category: '',\n        shipping: '',\n        quantity: '',\n        photo: '',\n        loading: false,\n        error: false,\n        createdProduct: '',\n        redirectToProfile: false,\n        formData: ''\n    });\n    const [categories, setCategories] = useState([]);\n\n    const { user, token } = isAuthenticated();\n    const {\n        name,\n        description,\n        price,\n        // categories,\n        category,\n        shipping,\n        quantity,\n        loading,\n        error,\n        createdProduct,\n        redirectToProfile,\n        formData\n    } = values;\n\n    const init = productId => {\n        getProduct(productId).then(data => {\n            if (data.error) {\n                setValues({ ...values, error: data.error });\n            } else {\n                // populate the state\n                setValues({\n                    ...values,\n                    name: data.name,\n                    description: data.description,\n                    price: data.price,\n                    category: data.category._id,\n                    shipping: data.shipping,\n                    quantity: data.quantity,\n                    formData: new FormData()\n                });\n                // load categories\n                initCategories();\n            }\n        });\n    };\n\n    // load categories and set form data\n    const initCategories = () => {\n        getCategories().then(data => {\n            if (data.error) {\n                setValues({ ...values, error: data.error });\n            } else {\n                setCategories(data);\n            }\n        });\n    };\n\n    useEffect(() => {\n        init(match.params.productId);\n    }, []);\n\n    const handleChange = name => event => {\n        const value = name === 'photo' ? event.target.files[0] : event.target.value;\n        formData.set(name, value);\n        setValues({ ...values, [name]: value });\n    };\n\n    const clickSubmit = event => {\n        event.preventDefault();\n        setValues({ ...values, error: '', loading: true });\n\n        updateProduct(match.params.productId, user._id, token, formData).then(data => {\n            if (data.error) {\n                setValues({ ...values, error: data.error });\n            } else {\n                setValues({\n                    ...values,\n                    name: '',\n                    description: '',\n                    photo: '',\n                    price: '',\n                    quantity: '',\n                    loading: false,\n                    error: false,\n                    redirectToProfile: true,\n                    createdProduct: data.name\n                });\n            }\n        });\n    };\n\n    const newPostForm = () => (\n        <form className=\"mb-3\" onSubmit={clickSubmit}>\n            <h4>Post Photo</h4>\n            <div className=\"form-group\">\n                <label className=\"btn btn-secondary\">\n                    <input onChange={handleChange('photo')} type=\"file\" name=\"photo\" accept=\"image/*\" />\n                </label>\n            </div>\n\n            <div className=\"form-group\">\n                <label className=\"text-muted\">Name</label>\n                <input onChange={handleChange('name')} type=\"text\" className=\"form-control\" value={name} />\n            </div>\n\n            <div className=\"form-group\">\n                <label className=\"text-muted\">Description</label>\n                <textarea onChange={handleChange('description')} className=\"form-control\" value={description} />\n            </div>\n\n            <div className=\"form-group\">\n                <label className=\"text-muted\">Price</label>\n                <input onChange={handleChange('price')} type=\"number\" className=\"form-control\" value={price} />\n            </div>\n\n            <div className=\"form-group\">\n                <label className=\"text-muted\">Category</label>\n                <select onChange={handleChange('category')} className=\"form-control\">\n                    <option>Please select</option>\n                    {categories &&\n                        categories.map((c, i) => (\n                            <option key={i} value={c._id}>\n                                {c.name}\n                            </option>\n                        ))}\n                </select>\n            </div>\n\n            <div className=\"form-group\">\n                <label className=\"text-muted\">Shipping</label>\n                <select onChange={handleChange('shipping')} className=\"form-control\">\n                    <option>Please select</option>\n                    <option value=\"0\">No</option>\n                    <option value=\"1\">Yes</option>\n                </select>\n            </div>\n\n            <div className=\"form-group\">\n                <label className=\"text-muted\">Quantity</label>\n                <input onChange={handleChange('quantity')} type=\"number\" className=\"form-control\" value={quantity} />\n            </div>\n\n            <button className=\"btn btn-outline-primary\">Update Product</button>\n        </form>\n    );\n\n    const showError = () => (\n        <div className=\"alert alert-danger\" style={{ display: error ? '' : 'none' }}>\n            {error}\n        </div>\n    );\n\n    const showSuccess = () => (\n        <div className=\"alert alert-info\" style={{ display: createdProduct ? '' : 'none' }}>\n            <h2>{`${createdProduct}`} is updated!</h2>\n        </div>\n    );\n\n    const showLoading = () =>\n        loading && (\n            <div className=\"alert alert-success\">\n                <h2>Loading...</h2>\n            </div>\n        );\n\n    const redirectUser = () => {\n        if (redirectToProfile) {\n            if (!error) {\n                return <Redirect to=\"/\" />;\n            }\n        }\n    };\n\n    return (\n        <Layout title=\"Add a new product\" description={`G'day ${user.name}, ready to add a new product?`}>\n            <div className=\"row\">\n                <div className=\"col-md-8 offset-md-2\">\n                    {showLoading()}\n                    {showSuccess()}\n                    {showError()}\n                    {newPostForm()}\n                    {redirectUser()}\n                </div>\n            </div>\n        </Layout>\n    );\n};\n\nexport default UpdateProduct;\n","import React from 'react'\r\nimport {BrowserRouter, Switch, Route} from 'react-router-dom'\r\nimport Signup from './user/Signup'\r\nimport Signin from './user/Signin'\r\nimport Home from './core/home'\r\nimport PrivateRoute from './auth/PrivateRoute'\r\nimport Dashboard from './user/userDashboard'\r\nimport AdminRoute from './auth/AdminRoute'\r\nimport AdminDashboard from './user/AdminDashboard'\r\nimport AddCategory from './admin/AddCategory'\r\nimport AddProduct from './admin/AddProduct'\r\nimport Shop from './core/Shop'\r\nimport Product from './core/Product'\r\nimport Cart from './core/Cart';\r\nimport Orders from './admin/Orders';\r\nimport Profile from './user/Profile';\r\nimport ManageProducts from './admin/ManageProducts';\r\nimport UpdateProduct from './admin/UpdateProduct';\r\n// import UpdateCategory from './admin/updateCategory';\r\n\r\nconst Routes = () => {\r\n    return(\r\n        <BrowserRouter>\r\n            <Switch>\r\n                <Route path=\"/\" exact component={Home} />\r\n                <Route path=\"/signin\" exact component={Signin} />\r\n                <Route path=\"/signup\" exact component={Signup} />\r\n                <Route path=\"/shop\" exact component={Shop} />\r\n                <PrivateRoute path=\"/user/dashboard\" exact component={Dashboard} />\r\n                <AdminRoute path=\"/admin/dashboard\" exact component={AdminDashboard} />\r\n                <AdminRoute path=\"/create/category\" exact component={AddCategory}/>\r\n                <AdminRoute path=\"/create/product\" exact component={AddProduct}/>\r\n                <Route path=\"/product/:productId\" exact component={Product} />\r\n                <Route path=\"/cart\" exact component={Cart} />\r\n                <AdminRoute path=\"/admin/orders\" exact component={Orders} />\r\n                <PrivateRoute path=\"/profile/:userId\" exact component={Profile} />\r\n                <PrivateRoute path=\"/admin/products\" exact component={ManageProducts} />\r\n                <AdminRoute path=\"/admin/product/update/:productId\" exact component={UpdateProduct} />\r\n                {/* <AdminRoute path=\"/admin/category/update/:categoryId\" exact component={UpdateCategory} /> */}\r\n            </Switch>\r\n        </BrowserRouter>\r\n    )\r\n}\r\n\r\nexport default Routes;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Routes from './Routes';\n\nReactDOM.render(<Routes/>, document.getElementById('root'));\n"],"sourceRoot":""}